import{h as F,a as e,i as Is,k as Ms,r as i,u as Pe,D as K,l as Ke,m as W,n as te,o as ie,p as ne,B as n,L as B,I as X,S as Se,q as _e,t as Te,v as Ee,w as O,T as Oe,x as Fe,y as z,z as g,E as ze,F as m,G as We,H as Xe,J as Ze,K as Ye,M as Qe,N as es,O as ss,P as as,Q as ts,R as D,j as Ls,U as Os,V as Fs,W as is,X as ns,Y as Ie,Z as rs,_ as je,$ as Ce,a0 as zs,a1 as ls,a2 as $s,a3 as Us,a4 as Bs}from"./index--8YPN16X.js";import{A as cs,a as ds,b as os,D as Me,S as ms,H as Le,u as q,w as hs}from"./xlsx-2pX4LCqN.js";import{C as us}from"./chevron-left-Bu-MDVDc.js";import{E as xs,a as ps}from"./eye-DeeWQ2n2.js";import{C as Rs}from"./circle-check-CJBUtHGw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=F("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=F("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=F("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=F("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=F("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=F("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=F("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=F("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Zs=Ms("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function gs({className:N,variant:x,...p}){return e.jsx("div",{className:Is(Zs({variant:x}),N),...p})}const Ys=({children:N})=>{const[x,p]=i.useState(!1),[P,S]=i.useState(!1),[Z,A]=i.useState(!1),[T,H]=i.useState([]),[_,C]=i.useState(!1),[y,E]=i.useState(null),[c,d]=i.useState({name:"",email:"",email_type:"to"}),{toast:o}=Pe(),I=async()=>{try{C(!0);const j=await(await D("https://digio.pgn.co.id/lisa_backend/email/get",{method:"GET",headers:{"Content-Type":"application/json"}})).json();j.status===200?(H(j.data),(!j.data||j.data.length===0)&&o({title:"Info",description:"Tidak ada penerima email ditemukan",variant:"warning"})):j.status===404?(H([]),o({title:"Info",description:"Belum ada data penerima email",variant:"warning"})):(H([]),o({title:"Error",description:j.data||"Gagal memuat data penerima email",variant:"destructive"}))}catch(t){o({title:"Error",description:"Gagal memuat data penerima email: "+(t instanceof Error?t.message:"Unknown error"),variant:"destructive"})}finally{C(!1)}};i.useEffect(()=>{x&&I()},[x]);const Y=async()=>{if(!c.name||!c.email||!c.email_type){o({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const j=await(await D("https://digio.pgn.co.id/lisa_backend/email/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();j.status===201?(o({title:"Berhasil",description:"Penerima email berhasil ditambahkan",variant:"success"}),d({name:"",email:"",email_type:"to"}),S(!1),I()):o({title:"Error",description:j.data||"Gagal menambahkan penerima email",variant:"destructive"})}catch{o({title:"Error",description:"Terjadi kesalahan saat menambahkan penerima email",variant:"destructive"})}},Q=async()=>{if(!y||!c.name||!c.email||!c.email_type){o({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const j=await(await D("https://digio.pgn.co.id/lisa_backend/email/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:y.uuid,...c})})).json();j.status===200?(o({title:"Berhasil",description:"Penerima email berhasil diperbarui",variant:"success"}),d({name:"",email:"",email_type:"to"}),E(null),A(!1),I()):o({title:"Error",description:j.data||"Gagal memperbarui penerima email",variant:"destructive"})}catch(t){console.error("Error updating email recipient:",t),o({title:"Error",description:"Terjadi kesalahan saat memperbarui penerima email",variant:"destructive"})}},re=async t=>{try{const j=await D("https://digio.pgn.co.id/lisa_backend/email/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:t})});if(j.status===204)o({title:"Berhasil",description:"Penerima email berhasil dihapus",variant:"success"}),I();else{let r="Gagal menghapus penerima email";try{r=(await j.json()).data||r}catch{}o({title:"Error",description:r,variant:"destructive"})}}catch(j){console.error("Error deleting email recipient:",j),o({title:"Error",description:"Terjadi kesalahan saat menghapus penerima email",variant:"destructive"})}},le=t=>{E(t),d({name:t.name,email:t.email,email_type:t.email_type}),A(!0)},ce=t=>{switch(t){case"to":return"bg-success text-primary-foreground";case"cc":return"bg-warning text-secondary-foreground";case"bcc":return"bg-primary text-muted-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs(e.Fragment,{children:[e.jsxs(K,{open:x,onOpenChange:p,children:[e.jsx(Ke,{asChild:!0,children:N}),e.jsxs(W,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsxs(te,{className:"shrink-0",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"Kelola Penerima Email"]}),e.jsx(ne,{className:"text-left",children:"Kelola daftar penerima email untuk notifikasi sistem"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto min-h-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(K,{open:P,onOpenChange:S,children:[e.jsx(Ke,{asChild:!0,children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsx("span",{className:"sm:hidden",children:"Tambah"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Penerima"})]})}),e.jsxs(W,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Tambah Penerima Email"}),e.jsx(ne,{className:"text-left",children:"Tambahkan penerima email baru untuk notifikasi"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"name",children:"Nama"}),e.jsx(X,{id:"name",value:c.name,onChange:t=>d({...c,name:t.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",value:c.email,onChange:t=>d({...c,email:t.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"email_type",children:"Tipe Email"}),e.jsxs(Se,{value:c.email_type,onValueChange:t=>d({...c,email_type:t}),children:[e.jsx(_e,{children:e.jsx(Te,{placeholder:"Pilih tipe email"})}),e.jsxs(Ee,{children:[e.jsx(O,{value:"to",children:"To (Penerima Utama)"}),e.jsx(O,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(O,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(n,{variant:"destructive",onClick:()=>S(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(n,{variant:"default",onClick:Y,className:"w-full sm:w-auto",children:"Tambah"})]})]})]})]})}),e.jsx("div",{className:"hidden md:block overflow-y-auto max-h-[50vh]",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(Oe,{children:[e.jsx(Fe,{children:e.jsxs(z,{className:"border-b",children:[e.jsx(g,{className:"font-semibold",children:"Nama"}),e.jsx(g,{className:"font-semibold",children:"Email"}),e.jsx(g,{className:"font-semibold",children:"Tipe"}),e.jsx(g,{className:"text-right font-semibold",children:"Aksi"})]})}),e.jsx(ze,{children:_?e.jsx(z,{children:e.jsx(m,{colSpan:4,className:"text-center py-8",children:"Memuat data..."})}):T.length===0?e.jsx(z,{children:e.jsx(m,{colSpan:4,className:"text-center py-8",children:"Belum ada penerima email"})}):T.map(t=>e.jsxs(z,{className:"border-b last:border-b-0",children:[e.jsx(m,{className:"font-medium",children:t.name}),e.jsx(m,{children:t.email}),e.jsx(m,{children:e.jsx(gs,{className:ce(t.email_type),children:t.email_type.toUpperCase()})}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"default",size:"sm",onClick:()=>le(t),children:e.jsx(De,{className:"w-4 h-4"})}),e.jsxs(We,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(fe,{className:"w-4 h-4"})})}),e.jsxs(Ze,{children:[e.jsxs(Ye,{children:[e.jsx(Qe,{className:"text-center",children:"Hapus Penerima Email"}),e.jsxs(es,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',t.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(ss,{children:[e.jsx(as,{children:"Batal"}),e.jsx(ts,{onClick:()=>re(t.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})})]},t.uuid))})]})})}),e.jsx("div",{className:"md:hidden space-y-3 overflow-y-auto max-h-[50vh]",children:_?e.jsx("div",{className:"text-center py-8",children:"Memuat data..."}):T.length===0?e.jsx("div",{className:"text-center py-8",children:"Belum ada penerima email"}):T.map(t=>e.jsx("div",{className:"border rounded-lg p-4 bg-card",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate mt-1",children:t.email}),e.jsx(gs,{className:`${ce(t.email_type)} mt-2`,children:t.email_type.toUpperCase()})]})}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(n,{size:"sm",variant:"default",onClick:()=>le(t),className:"flex-1",children:[e.jsx(De,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(We,{children:[e.jsx(Xe,{asChild:!0,children:e.jsxs(n,{size:"sm",variant:"destructive",className:"flex-1",children:[e.jsx(fe,{className:"w-4 h-4 mr-1"}),"Hapus"]})}),e.jsxs(Ze,{children:[e.jsxs(Ye,{children:[e.jsx(Qe,{children:"Hapus Penerima Email"}),e.jsxs(es,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',t.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(ss,{children:[e.jsx(as,{children:"Batal"}),e.jsx(ts,{onClick:()=>re(t.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})]})},t.uuid))})]})]})]}),e.jsx(K,{open:Z,onOpenChange:A,children:e.jsxs(W,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Edit Penerima Email"}),e.jsx(ne,{children:"Ubah informasi penerima email yang sudah ada"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"edit-name",children:"Nama"}),e.jsx(X,{id:"edit-name",value:c.name,onChange:t=>d({...c,name:t.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"edit-email",children:"Email"}),e.jsx(X,{id:"edit-email",type:"email",value:c.email,onChange:t=>d({...c,email:t.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"edit-email_type",children:"Tipe Email"}),e.jsxs(Se,{value:c.email_type,onValueChange:t=>d({...c,email_type:t}),children:[e.jsx(_e,{children:e.jsx(Te,{placeholder:"Pilih tipe email"})}),e.jsxs(Ee,{children:[e.jsx(O,{value:"to",children:"To (Penerima Utama)"}),e.jsx(O,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(O,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(n,{variant:"destructive",onClick:()=>A(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(n,{variant:"default",onClick:Q,className:"w-full sm:w-auto",children:"Simpan"})]})]})]})})]})},Qs=({open:N,onOpenChange:x,onSuccess:p})=>{const[P,S]=i.useState(!1),[Z,A]=i.useState(null),[T,H]=i.useState(!1),[_,C]=i.useState([]),[y,E]=i.useState(["09:00"]),{toast:c}=Pe(),d=[{value:"1",label:"Senin"},{value:"2",label:"Selasa"},{value:"3",label:"Rabu"},{value:"4",label:"Kamis"},{value:"5",label:"Jumat"},{value:"6",label:"Sabtu"},{value:"0",label:"Minggu"}];i.useEffect(()=>{N&&o()},[N]);const o=async()=>{try{const h=await(await D("https://digio.pgn.co.id/lisa_backend/cron/running")).json();h.status===200&&h.data&&h.data.length>0?(A(h.data[0]),H(!0),I(h.data[0].time_schedule)):(H(!1),C(["1","2","3","4","5"]),E(["09:00","15:00"]))}catch(r){console.error("Error checking existing schedule:",r),H(!1),C(["1","2","3","4","5"]),E(["09:00","15:00"])}},I=r=>{const h=r.split(" ");if(h.length===5){const[f,R,,,$]=h,de=R.split(",").map(ee=>`${ee.padStart(2,"0")}:${f.padStart(2,"0")}`);if(E(de),$.includes("-")){const[ee,xe]=$.split("-").map(Number),U=[];for(let V=ee;V<=xe;V++)U.push(V.toString());C(U)}else $.includes(",")?C($.split(",")):C([$])}},Y=()=>{var $;const r=[...new Set(y.map(M=>M.split(":")[0]))],h=(($=y[0])==null?void 0:$.split(":")[1])||"00",f=r.join(","),R=_.sort((M,de)=>Number(M)-Number(de)).join(",");return`${h} ${f} * * ${R}`},Q=async()=>{if(_.length===0||y.length===0){c({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}S(!0);try{const r=Y();if((await D("https://digio.pgn.co.id/lisa_backend/cron/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"sendEmail",time_schedule:r,is_running:!0})})).ok)c({title:"Notifikasi berhasil disimpan dan diaktifkan",description:"Notifikasi telah dijadwalkan sesuai pengaturan",variant:"success"}),p(),x(!1);else throw new Error("Failed to save schedule")}catch(r){console.error("Error saving schedule:",r),c({title:"Error",description:"Gagal menyimpan penjadwalan",variant:"destructive"})}finally{S(!1)}},re=async()=>{if(_.length===0||y.length===0){c({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}S(!0);try{const r=Y();if((await D("https://digio.pgn.co.id/lisa_backend/cron/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:Z.uuid,time_schedule:r,is_running:!0})})).ok)c({title:"Notifikasi berhasil diperbarui dan diaktifkan",description:"Notifikasi telah dijadwalkan ulang sesuai pengaturan",variant:"success"}),p(),x(!1);else throw new Error("Failed to update schedule")}catch(r){console.error("Error updating schedule:",r),c({title:"Error",description:"Gagal memperbarui penjadwalan",variant:"destructive"})}finally{S(!1)}},le=()=>{E([...y,"09:00"])},ce=r=>{y.length>1&&E(y.filter((h,f)=>f!==r))},t=(r,h)=>{const f=[...y];f[r]=h,E(f)},j=r=>{_.includes(r)?C(_.filter(h=>h!==r)):C([..._,r])};return e.jsx(K,{open:N,onOpenChange:x,children:e.jsxs(W,{className:"sm:max-w-md h-full max-h-[85vh] overflow-y-auto",children:[e.jsxs(te,{className:"shrink-0",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"w-5 h-5"}),"Pengaturan Penjadwalan Notifikasi"]}),e.jsx(ne,{className:"text-left",children:"Notifikasi lisensi akan dikirim 1 kali pada 6 bulan, 3 bulan, 1 bulan, dan tepat saat lisensi kadaluarsa. Jika lisensi sudah kadaluarsa lebih dari 1 hari, notifikasi akan dikirim seminggu sekali hanya di hari kerja. Pengaturan dibawah ini berfungsi untuk melakukan pengecekan lisensi dan waktu pengiriman notifikasi."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-sm font-medium",children:"Hari"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:d.map(r=>e.jsx(n,{type:"button",variant:_.includes(r.value)?"default":"outline",size:"sm",onClick:()=>j(r.value),className:"text-xs",children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx(B,{className:"text-sm font-medium",children:"Waktu"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[y.map((r,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{type:"time",value:r,onChange:f=>t(h,f.target.value),className:"flex-1"}),y.length>1&&e.jsx(n,{type:"button",variant:"destructive",size:"sm",onClick:()=>ce(h),children:e.jsx(fe,{className:"w-4 h-4"})})]},h)),e.jsxs(n,{type:"button",variant:"warning",size:"sm",onClick:le,className:"w-full",children:[e.jsx($e,{className:"w-4 h-4"}),"Tambah Waktu"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(n,{variant:"destructive",onClick:()=>x(!1),className:"flex-1",children:"Batal"}),T?e.jsx(n,{onClick:re,disabled:P,className:"flex-1",children:P?"Memperbarui...":"Perbarui & Aktifkan"}):e.jsx(n,{onClick:Q,disabled:P,className:"flex-1",children:P?"Menyimpan...":"Simpan & Aktifkan"})]})]})]})})},ea=({onLogout:N})=>{const[x,p]=i.useState(!1),[P,S]=i.useState(!1),[Z,A]=i.useState(!1),{toast:T}=Pe(),{theme:H,setTheme:_}=Ls();i.useEffect(()=>{S(window.self!==window.top)},[]),i.useEffect(()=>{C()},[]);const C=async()=>{try{const d=await(await D("https://digio.pgn.co.id/lisa_backend/cron/running")).json();d.status===404&&(p(!1),T({title:"Penjadwalan notifikasi belum tersedia",description:"Aktifkan notifikasi untuk membuat jadwal pengiriman notifikasi",variant:"destructive"})),d.status===200&&d.data[0].is_running===!0&&p(!0),d.status===200&&d.data[0].is_running===!1&&p(!1)}catch(c){console.error("Error checking notification status:",c)}},y=async c=>{if(c)A(!0);else try{const o=await(await D("https://digio.pgn.co.id/lisa_backend/cron/running")).json();if(o.status===200&&o.data&&o.data.length>0){const I=o.data[0].uuid;(await D("https://digio.pgn.co.id/lisa_backend/cron/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:I,is_running:!1})})).ok&&(p(!1),T({title:"Notifikasi dinonaktifkan",description:"Notifikasi telah dinonaktifkan",variant:"destructive"}))}}catch(d){console.error("Error disabling notification:",d),T({title:"Error",description:"Terjadi kesalahan saat menonaktifkan notifikasi",variant:"destructive"})}},E=()=>{p(!0),C()};return e.jsxs("header",{className:"bg-card border-b border-border shadow-sm sticky top-0 z-10",children:[e.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("img",{src:H==="dark"?"/lisa/logo-dark.png":"/lisa/logo-white.png",alt:"Lisensi Aset Logo",className:"h-8 w-auto sm:h-8 object-contain"}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-foreground",children:"Lisensi Aset"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sistem Monitoring Lisensi Aset"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx(Ys,{children:e.jsxs(n,{variant:"default",size:"sm",className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(ws,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Email"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Vs,{className:`w-4 h-4 sm:w-5 sm:h-5 ${x?"text-primary":"text-muted-foreground"}`}),e.jsx(Os,{checked:x,onCheckedChange:y,"aria-label":"Toggle notifications",className:"scale-75 sm:scale-100"}),e.jsx("span",{className:"hidden sm:inline text-sm text-muted-foreground",children:x?"Aktif":"Nonaktif"})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>_(H==="dark"?"light":"dark"),className:"px-2 sm:px-3 py-1 sm:py-2",children:H==="dark"?e.jsx(Ws,{className:"w-4 h-4"}):e.jsx(Ks,{className:"w-4 h-4"})}),!P&&e.jsxs(n,{variant:"destructive",size:"sm",onClick:N,className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(qs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),e.jsx(Qs,{open:Z,onOpenChange:A,onSuccess:E})]})},sa=({onDataChange:N})=>{const x=Fs(),[p,P]=i.useState(""),[S,Z]=i.useState([]),[A,T]=i.useState(!0),[H,_]=i.useState(!1),[C,y]=i.useState(null),[E,c]=i.useState(!1),[d,o]=i.useState(1),[I,Y]=i.useState("10"),[Q,re]=i.useState(1),[le,ce]=i.useState(0),[t,j]=i.useState("status_lisensi"),[r,h]=i.useState("asc"),{toast:f}=Pe(),[R,$]=i.useState(""),[M,de]=i.useState(""),[ee,xe]=i.useState("asc"),[U,V]=i.useState(1),[oe,Ue]=i.useState(5),vs=async(s=1,a=10,l,L,b)=>{try{let u=`https://digio.pgn.co.id/lisa_backend/licenses/get?page=${s}&paginate=${a}&name=${l?encodeURIComponent(l):""}`;const he=L||"status_lisensi",Ae=(b||"asc").toUpperCase();u+=`&sortField=${he}&sortOrder=${Ae}`;const ue=await(await D(u)).json();return ue.status===200?(Z(ue.data.docs),re(ue.data.pages),ce(ue.data.total),ue.data.docs):[]}catch{return f({title:"Error",description:"Terjadi kesalahan saat memuat data lisensi",variant:"destructive"}),[]}},ge=i.useCallback(async s=>{T(!0);try{await vs(d,parseInt(I),s,t,r)}catch(a){console.error("Error fetching data:",a)}finally{T(!1)}},[d,I,t,r]);i.useEffect(()=>{if(p){const s=setTimeout(()=>{ge(p),o(1)},500);return()=>clearTimeout(s)}else ge()},[d,I,p,t,r]);const[we,Ns]=i.useState({}),w=s=>{const a={day:"2-digit",month:"long",year:"numeric"};return new Date(s).toLocaleDateString("id-ID",a)},ve=s=>{switch(s){case 1:return{text:"Sudah Kadaluarsa",color:"bg-red-100 text-red-700 border-red-200",icon:$s};case 2:return{text:"Akan Kadaluarsa",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:ls};case 3:return{text:"Aman",color:"bg-green-100 text-green-700 border-green-200",icon:Rs};default:return{text:"Unknown",color:"bg-gray-100 text-gray-700 border-gray-200",icon:ls}}},Be=s=>{Ns(a=>({...a,[s]:!a[s]}))},se=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),ys=async()=>{try{T(!0);const l=await(await D("https://digio.pgn.co.id/lisa_backend/licenses/get?page=1&paginate=9999&name=")).json();if(l.status!==200||l.data.docs.length===0){f({title:"Info",description:"Tidak ada data yang bisa diekspor (data kosong)",variant:"warning"});return}const b=l.data.docs.map(v=>({UUID:v.uuid,"Nama Aset":v.name,"Tanggal Mulai":w(v.start_date),"Tanggal Berakhir":w(v.end_date),Status:ve(v.status_lisensi).text,Volume:v.volume,Satuan:v.satuan,"Harga Satuan":v.harga_satuan,"Total Harga":v.jumlah,Username:v.username,Password:v.password,Lokasi:v.lokasi_lisensi,Catatan:v.description,"Dibuat pada":w(v.createdAt),"Diupdate pada":w(v.updatedAt)})),u=q.json_to_sheet(b),he=q.book_new();q.book_append_sheet(he,u,"Data Lisensi");const Ae=[{wch:30},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:15},{wch:15},{wch:20},{wch:20},{wch:30},{wch:40},{wch:15},{wch:15}];u["!cols"]=Ae;const He=q.decode_range(u["!ref"]||"A1");for(let v=He.s.c;v<=He.e.c;++v){const qe=q.encode_col(v)+"1";u[qe]&&(u[qe].s={font:{bold:!0},fill:{fgColor:{rgb:"EFEFEF"}},alignment:{horizontal:"center"}})}const Hs=new Date().toISOString().split("T")[0];hs(he,`Data_Lisensi_${Hs}.xlsx`),f({title:"Export berhasil",description:"Data lisensi telah diekspor ke file Excel",variant:"success"})}catch{return}finally{T(!1)}},ks=s=>{var l;const a=(l=s.target.files)==null?void 0:l[0];a&&y(a)},bs=()=>{_(!0)},Cs=()=>{window.open("/lisa/Template_Upload_Data_Lisensi.xlsx","_blank")},[Re,pe]=i.useState(!1),[Ss,Ne]=i.useState(!1),[k,Ve]=i.useState(null),me=(s,a)=>{s==="Delete"?(Ve(a),Ne(!0)):s==="Edit"?x(`/edit/${a.uuid}`):s==="History"&&(Ve(a),pe(!0))},_s=async()=>{if(k)try{if((await D("https://digio.pgn.co.id/lisa_backend/licenses/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:k.uuid})})).ok)x("/"),f({title:"Berhasil",description:"Data lisensi berhasil dihapus",variant:"success"}),Ne(!1),ge(p),N==null||N();else throw new Error("Gagal menghapus data")}catch{f({title:"Error",description:"Terjadi kesalahan saat menghapus data lisensi",variant:"destructive"})}},Ts=async()=>{if(!C){f({title:"Error",description:"Pilih file terlebih dahulu",variant:"destructive"});return}try{c(!0);const s=new FormData;s.append("file",C);const a=Us("auth_name")||"";if(s.append("last_user_input",a),(await D("https://digio.pgn.co.id/lisa_backend/licenses/upload",{method:"POST",body:s})).ok)x("/"),f({title:"Import berhasil",description:"Data lisensi telah berhasil diimport",variant:"success"}),_(!1),y(null),ge(p),N==null||N();else throw new Error("Import gagal")}catch{f({title:"Import gagal",description:"Terjadi kesalahan saat mengimport data",variant:"destructive"})}finally{c(!1)}},G=i.useCallback(s=>{o(1),t===s?h(a=>a==="asc"?"desc":"asc"):(j(s),h("asc"))},[t]),J=i.useMemo(()=>s=>t!==s?e.jsx(cs,{className:"w-4 h-4 ml-1 opacity-50"}):r==="asc"?e.jsx(ds,{className:"w-4 h-4 ml-1"}):e.jsx(os,{className:"w-4 h-4 ml-1"}),[t,r]),[ye,Es]=i.useState({}),Ge=s=>{Es(a=>({...a,[s]:!a[s]}))},Je=(s,a)=>{const l=[];l.push(1),s-2>2&&l.push("...");for(let b=Math.max(2,s-2);b<=Math.min(a-1,s+2);b++)l.push(b);return s+2<a-1&&l.push("..."),a>1&&l.push(a),l},ke=s=>{M===s?xe(ee==="asc"?"desc":"asc"):(de(s),xe("asc")),V(1)},be=s=>M!==s?e.jsx(cs,{className:"w-4 h-4 ml-1 opacity-50"}):ee==="asc"?e.jsx(ds,{className:"w-4 h-4 ml-1"}):e.jsx(os,{className:"w-4 h-4 ml-1"}),Ds=s=>{let a=s;return R&&(a=s.filter(l=>l.description.toLowerCase().includes(R.toLowerCase())||l.last_user_input.toLowerCase().includes(R.toLowerCase())||se(l.harga_satuan).toLowerCase().includes(R.toLowerCase()))),M&&(a=[...a].sort((l,L)=>{let b=l[M],u=L[M];return M==="harga_satuan"&&(b=Number(b),u=Number(u)),(M==="tanggal"||M==="createdAt")&&(b=new Date(b).getTime(),u=new Date(u).getTime()),ee==="asc"?b<u?-1:b>u?1:0:b>u?-1:b<u?1:0})),a},ae=s=>{const a=Ds(s),l=(U-1)*oe,L=l+oe;return{items:a.slice(l,L),totalItems:a.length,totalPages:Math.ceil(a.length/oe)}},Ps=s=>{try{const a=s.history_licenses.map((u,he)=>({No:he+1,"Nama Lisensi":s.name,"Harga Satuan":u.harga_satuan,"Berlaku Sejak":w(u.tanggal),Deskripsi:u.description,"Terakhir Input Oleh":u.last_user_input,"Dibuat Pada":w(u.createdAt)})),l=q.book_new(),L=q.json_to_sheet(a);q.book_append_sheet(l,L,"Riwayat Harga");const b=new Date().toISOString().split("T")[0];hs(l,`Riwayat Harga Lisensi_${s.name}_${b}.xlsx`),f({title:"Berhasil",description:"History berhasil diekspor ke Excel",variant:"success"})}catch{f({title:"Error",description:"Gagal mengekspor history ke Excel",variant:"destructive"})}},As=()=>{$(""),de(""),xe("asc"),V(1),Ue(5)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-foreground",children:"Daftar Lisensi Aset"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(n,{onClick:()=>x("/add"),className:"flex items-center justify-center gap-2 w-full sm:w-auto",variant:"success",children:[e.jsx($e,{className:"w-4 h-4"}),"Tambah Lisensi"]}),e.jsxs(n,{onClick:()=>x("/prices"),variant:"warning",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(Gs,{className:"w-4 h-4"}),"Harga Lisensi"]}),e.jsxs(is,{children:[e.jsx(ns,{asChild:!0,children:e.jsxs(n,{variant:"default",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(js,{className:"w-4 h-4"}),"Excel",e.jsx(Ie,{className:"w-4 h-4"})]})}),e.jsxs(rs,{children:[e.jsxs(je,{onClick:bs,children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Import Data"]}),e.jsxs(je,{onClick:ys,children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(X,{placeholder:"Cari lisensi...",value:p,onChange:s=>P(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:["Total Data: ",le," - Tampilkan:"]}),e.jsxs(Se,{value:I,onValueChange:Y,children:[e.jsx(_e,{className:"w-full sm:w-24",children:e.jsx(Te,{})}),e.jsxs(Ee,{children:[e.jsx(O,{value:"10",children:"10"}),e.jsx(O,{value:"25",children:"25"}),e.jsx(O,{value:"50",children:"50"}),e.jsx(O,{value:"100",children:"100"})]})]})]})]}),e.jsx(K,{open:H,onOpenChange:_,children:e.jsxs(W,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Import Data Lisensi"}),e.jsx(ne,{children:"Upload file Excel untuk mengimport data lisensi baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Template Excel"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Gunakan template yang telah disediakan untuk mengimport data"}),e.jsxs(n,{variant:"secondary",size:"sm",onClick:Cs,className:"w-full",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Download Template"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Upload File"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pilih file Excel yang akan diimport"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(X,{type:"file",accept:".xlsx",onChange:ks,disabled:E}),e.jsx(n,{onClick:Ts,disabled:!C||E,className:"w-full",children:E?e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-4 h-4 mr-2 animate-spin"}),"Mengupload..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})]})}),e.jsx(K,{open:Ss,onOpenChange:Ne,children:e.jsxs(W,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Konfirmasi Hapus"}),e.jsx(ne,{children:"Konfirmasi penghapusan data lisensi yang dipilih"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{children:['Apakah Anda yakin ingin menghapus lisensi "',k==null?void 0:k.name,'"?']}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"default",onClick:()=>Ne(!1),children:"Batal"}),e.jsx(n,{variant:"destructive",onClick:_s,children:"Hapus"})]})]})}),e.jsx(K,{open:Re,onOpenChange:pe,children:e.jsxs(W,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsx(K,{open:Re,onOpenChange:s=>{pe(s),s||As()},children:e.jsxs(W,{className:"w-full max-w-full sm:max-w-4xl",onOpenAutoFocus:s=>s.preventDefault(),children:[e.jsxs(te,{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Riwayat Harga Lisensi ",k==null?void 0:k.name]}),e.jsx(ne,{className:"text-left",children:"Detail riwayat harga lisensi"})]}),k&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 flex-wrap w-full",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(X,{placeholder:"Cari...",value:R,onChange:s=>$(s.target.value),className:"pl-10 w-full",tabIndex:-1})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Tampilkan:"}),e.jsxs(Se,{value:oe.toString(),onValueChange:s=>Ue(Number(s)),children:[e.jsx(_e,{className:"w-full sm:w-24",children:e.jsx(Te,{})}),e.jsxs(Ee,{children:[e.jsx(O,{value:"5",children:"5"}),e.jsx(O,{value:"10",children:"10"}),e.jsx(O,{value:"20",children:"20"})]})]})]})]}),e.jsx("div",{className:"hidden sm:block border rounded-lg overflow-x-auto",children:e.jsxs(Oe,{className:"w-full min-w-[700px] text-sm",children:[e.jsx(Fe,{children:e.jsxs(z,{className:"bg-muted/50 border-b",children:[e.jsx(g,{className:"w-12 text-center",children:"No"}),e.jsx(g,{onClick:()=>ke("harga_satuan"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",be("harga_satuan")]})}),e.jsx(g,{onClick:()=>ke("tanggal"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Berlaku Sejak",be("tanggal")]})}),e.jsx(g,{children:"Deskripsi"}),e.jsx(g,{onClick:()=>ke("last_user_input"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["User",be("last_user_input")]})}),e.jsx(g,{onClick:()=>ke("createdAt"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Dibuat Pada",be("createdAt")]})})]})}),e.jsxs(ze,{children:[ae(k.history_licenses).items.map((s,a)=>e.jsxs(z,{children:[e.jsx(m,{className:"text-center",children:(U-1)*oe+a+1}),e.jsx(m,{children:se(s.harga_satuan)}),e.jsx(m,{children:w(s.tanggal)}),e.jsx(m,{className:"whitespace-pre-wrap break-words max-w-[200px]",children:s.description}),e.jsx(m,{children:s.last_user_input}),e.jsx(m,{children:w(s.createdAt)})]},s.id)),ae(k.history_licenses).items.length===0&&e.jsx(z,{children:e.jsx(m,{colSpan:6,className:"text-center py-6 text-muted-foreground",children:"Tidak ada data riwayat"})})]})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:ae(k.history_licenses).items.length>0?ae(k.history_licenses).items.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsxs("span",{children:["No: ",(U-1)*oe+a+1]}),e.jsx("span",{children:w(s.tanggal)})]}),e.jsx("div",{className:"font-medium text-sm",children:se(s.harga_satuan)}),e.jsx("div",{className:"text-xs text-slate-400 whitespace-pre-wrap break-words mb-2",children:s.description}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["User: ",s.last_user_input]}),e.jsxs("span",{children:["Dibuat: ",w(s.createdAt)]})]})]},s.id)):e.jsx("div",{className:"text-center py-6 text-muted-foreground text-sm",children:"Tidak ada data riwayat"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 mt-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-wrap justify-center sm:justify-start w-full sm:w-auto",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>V(s=>Math.max(1,s-1)),disabled:U===1,children:e.jsx(us,{className:"w-4 h-4"})}),Je(U,ae(k.history_licenses).totalPages).map((s,a)=>e.jsx(n,{variant:U===s?"default":"outline",size:"sm",onClick:()=>typeof s=="number"&&V(s),disabled:s==="...",children:s},a)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>V(s=>Math.min(ae(k.history_licenses).totalPages,s+1)),disabled:U===ae(k.history_licenses).totalPages,children:e.jsx(Ce,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[e.jsxs(n,{variant:"success",onClick:()=>k&&Ps(k),className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(Me,{className:"w-4 h-4"}),"Export"]}),e.jsx(n,{variant:"destructive",onClick:()=>pe(!1),className:"w-full sm:w-auto",children:"Tutup"})]})]})]})]})}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(n,{variant:"destructive",onClick:()=>pe(!1),children:"Batal"})})]})}),e.jsx("div",{className:"hidden sm:block border rounded-lg overflow-x-auto",children:e.jsxs(Oe,{className:"[&_tr>*]:border-r [&_tr>*:last-child]:border-r-0 [&_tr]:border-b [&_tr:last-child]:border-b-0",children:[e.jsx(Fe,{children:e.jsxs(z,{className:"bg-muted/50 border-b",children:[e.jsx(g,{className:"w-[120px] text-center whitespace-nowrap",children:"Aksi"}),e.jsx(g,{className:"w-[200px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("name"),children:e.jsxs("div",{className:"flex items-center",children:["Nama Aset",J("name")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("start_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Mulai",J("start_date")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Berakhir",J("end_date")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Status",J("end_date")]})}),e.jsx(g,{className:"w-[80px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("volume"),children:e.jsxs("div",{className:"flex items-center",children:["Volume",J("volume")]})}),e.jsx(g,{className:"w-[100px] whitespace-nowrap",children:"Satuan"}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("harga_satuan"),children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",J("harga_satuan")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("jumlah"),children:e.jsxs("div",{className:"flex items-center",children:["Total Harga",J("jumlah")]})}),e.jsx(g,{className:"w-[130px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("createdAt"),children:e.jsxs("div",{className:"flex items-center",children:["Dibuat pada",J("createdAt")]})}),e.jsx(g,{className:"w-[130px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>G("updatedAt"),children:e.jsxs("div",{className:"flex items-center",children:["Diupdate pada",J("updatedAt")]})})]})}),e.jsx(ze,{className:"[&_tr:last-child]:border-b-0",children:A?e.jsx(z,{children:e.jsx(m,{colSpan:11,className:"text-center py-8",children:"Memuat data..."})}):S.length===0?e.jsx(z,{children:e.jsx(m,{colSpan:11,className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"})}):S.map((s,a)=>(ve(s.status_lisensi),e.jsxs(zs.Fragment,{children:[e.jsxs(z,{className:"hover:bg-muted/30",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(n,{variant:"success",size:"sm",onClick:()=>Ge(a),children:ye[a]?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(n,{variant:"default",size:"sm",onClick:()=>me("History",s),children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx(n,{variant:"warning",size:"sm",onClick:()=>me("Edit",s),children:e.jsx(De,{className:"w-4 h-4"})}),e.jsx(n,{variant:"destructive",size:"sm",onClick:()=>me("Delete",s),children:e.jsx(fe,{className:"w-4 h-4"})})]})}),e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{className:"whitespace-nowrap",children:w(s.start_date)}),e.jsx(m,{className:"whitespace-nowrap",children:w(s.end_date)}),e.jsx(m,{className:"whitespace-nowrap",children:(()=>{const l=ve(s.status_lisensi),L=l.icon;return e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${l.color}`,children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),l.text]})})()}),e.jsx(m,{className:"text-right",children:s.volume}),e.jsx(m,{children:s.satuan}),e.jsx(m,{className:"text-right whitespace-nowrap",children:se(s.harga_satuan)}),e.jsx(m,{className:"text-right whitespace-nowrap",children:se(s.jumlah)}),e.jsx(m,{className:"whitespace-nowrap text-sm",children:w(s.createdAt)}),e.jsx(m,{className:"whitespace-nowrap text-sm",children:w(s.updatedAt)})]}),ye[a]&&e.jsx(z,{className:"bg-muted/5",children:e.jsx(m,{colSpan:11,className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Akses"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:we[a]?s.password:"•".repeat(8)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Be(a),className:"h-6 w-6 p-0",children:we[a]?e.jsx(xs,{className:"h-4 w-4"}):e.jsx(ps,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",s.lokasi_lisensi]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Tambahan"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1",children:s.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dibuat pada:"})," ",w(s.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Diupdate pada:"})," ",w(s.updatedAt)]})]})]})]})})})]},s.uuid)))})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:A?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Memuat data..."}):S.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"}):S.map((s,a)=>{const l=ve(s.status_lisensi),L=l.icon;return e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${l.color}`,children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),l.text]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"success",size:"sm",onClick:()=>Ge(a),children:ye[a]?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsxs(is,{children:[e.jsx(ns,{asChild:!0,children:e.jsx(n,{variant:"default",size:"sm",children:e.jsx(js,{className:"w-4 h-4"})})}),e.jsxs(rs,{children:[e.jsxs(je,{onClick:()=>me("History",s),children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Riwayat"]}),e.jsxs(je,{onClick:()=>me("Edit",s),children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(je,{onClick:()=>me("Delete",s),children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Hapus"]})]})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Nama Lisensi:"}),e.jsx("span",{children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Mulai:"}),e.jsx("span",{children:w(s.start_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Berakhir:"}),e.jsx("span",{children:w(s.end_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Volume x Harga Satuan:"}),e.jsxs("span",{children:[s.volume," ",s.satuan," x ",se(s.harga_satuan)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Harga:"}),e.jsx("span",{children:se(s.jumlah)})]})]}),ye[a]&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:we[a]?s.password:"•".repeat(8)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Be(a),className:"sm:inline-flex",children:we[a]?e.jsx(xs,{className:"h-4 w-4"}):e.jsx(ps,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",s.lokasi_lisensi]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:s.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Dibuat pada:"})," ",w(s.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Diupdate pada:"})," ",w(s.updatedAt)]})]})})]},s.uuid)})}),!A&&S.length>0&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.max(1,s-1)),disabled:d===1,children:e.jsx(us,{className:"w-4 h-4"})}),Je(d,Q).map((s,a)=>e.jsx(n,{variant:d===s?"default":"outline",size:"sm",onClick:()=>typeof s=="number"&&o(s),disabled:s==="...",children:s},a)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.min(Q,s+1)),disabled:d===Q,children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})},la=({onLogout:N})=>{const x=i.useRef(null),p=()=>{var P;(P=x.current)==null||P.refreshData()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ea,{onLogout:N}),e.jsx("main",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"Dashboard Monitoring Lisensi"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Pantau status dan kelola lisensi aset"})]}),e.jsx(Bs,{ref:x}),e.jsx(sa,{onDataChange:p})]})})]})};export{la as default};
