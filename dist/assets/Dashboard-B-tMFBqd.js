import{e as $,f as Re,r,g as ae,h as pt,a as e,P as se,i as C,k as Ns,l as I,m as Cs,n as ks,u as Te,o as G,j as _s,C as Pt,p as Ss,q as qe,t as At,v as ht,w as Ot,x as Ms,y as Ge,D as Es,z as Ds,B as Rs,E as Ft,F as Ts,G as Is,H as Ps,R as As,I as Os,J as Fs,K as Ls}from"./index-DPDCU0Sd.js";import{b as Lt,B as k}from"./button-CxxTvLrF.js";import{u as $s,c as $t,T as Gs,O as Us,W as Bs,C as Ks,a as zs,D as Hs,b as Gt,P as Vs,R as Ws,d as xe,e as Ct,f as ge,g as ve,h as we,i as je,S as Xe,j as Je,k as Ze,l as Qe,m as ee,n as Ut,o as Bt,p as ie,q as V,r as Kt,s as O,t as zt,v as Ys,A as qs,w as Xs,x as Js,y as kt,z as _t,B as Zs,E as Se,F as Qs}from"./xlsx-BwYBrUO5.js";import{I as me}from"./input-Bet5STBL.js";import{L as te}from"./label-BnyNpbWB.js";import{C as We,a as St,c as Mt,d as en}from"./card-3w2IwPEp.js";import{T as tn}from"./triangle-alert-Bv3B38bY.js";import{u as et,h as an,a as sn,F as nn,R as rn,C as tt,b as on}from"./index-G-zrxCeu.js";import{C as cn}from"./circle-check-BIf1V_Bw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=$("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=$("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=$("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=$("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=$("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=$("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=$("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=$("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=$("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=$("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=$("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var Ue="Switch",[jn,Do]=Re(Ue),[yn,bn]=jn(Ue),Vt=r.forwardRef((t,s)=>{const{__scopeSwitch:a,name:n,checked:o,defaultChecked:l,required:d,disabled:p,value:g="on",onCheckedChange:f,form:i,...c}=t,[h,u]=r.useState(null),v=ae(s,M=>u(M)),j=r.useRef(!1),b=h?i||!!h.closest("form"):!0,[E,P]=pt({prop:o,defaultProp:l??!1,onChange:f,caller:Ue});return e.jsxs(yn,{scope:a,checked:E,disabled:p,children:[e.jsx(se.button,{type:"button",role:"switch","aria-checked":E,"aria-required":d,"data-state":Xt(E),"data-disabled":p?"":void 0,disabled:p,value:g,...c,ref:v,onClick:C(t.onClick,M=>{P(D=>!D),b&&(j.current=M.isPropagationStopped(),j.current||M.stopPropagation())})}),b&&e.jsx(qt,{control:h,bubbles:!j.current,name:n,value:g,checked:E,required:d,disabled:p,form:i,style:{transform:"translateX(-100%)"}})]})});Vt.displayName=Ue;var Wt="SwitchThumb",Yt=r.forwardRef((t,s)=>{const{__scopeSwitch:a,...n}=t,o=bn(Wt,a);return e.jsx(se.span,{"data-state":Xt(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:s})});Yt.displayName=Wt;var Nn="SwitchBubbleInput",qt=r.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:n=!0,...o},l)=>{const d=r.useRef(null),p=ae(d,l),g=$s(a),f=Ns(s);return r.useEffect(()=>{const i=d.current;if(!i)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"checked").set;if(g!==a&&u){const v=new Event("click",{bubbles:n});u.call(i,a),i.dispatchEvent(v)}},[g,a,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:p,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qt.displayName=Nn;function Xt(t){return t?"checked":"unchecked"}var Jt=Vt,Cn=Yt;const Zt=r.forwardRef(({className:t,...s},a)=>e.jsx(Jt,{className:I("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:e.jsx(Cn,{className:I("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zt.displayName=Jt.displayName;const kn=Cs("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Dt({className:t,variant:s,...a}){return e.jsx("div",{className:I(kn({variant:s}),t),...a})}var Qt="AlertDialog",[_n,Ro]=Re(Qt,[$t]),ce=$t(),ea=t=>{const{__scopeAlertDialog:s,...a}=t,n=ce(s);return e.jsx(Ws,{...n,...a,modal:!0})};ea.displayName=Qt;var Sn="AlertDialogTrigger",ta=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...n}=t,o=ce(a);return e.jsx(Gs,{...o,...n,ref:s})});ta.displayName=Sn;var Mn="AlertDialogPortal",aa=t=>{const{__scopeAlertDialog:s,...a}=t,n=ce(s);return e.jsx(Vs,{...n,...a})};aa.displayName=Mn;var En="AlertDialogOverlay",sa=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...n}=t,o=ce(a);return e.jsx(Us,{...o,...n,ref:s})});sa.displayName=En;var ye="AlertDialogContent",[Dn,Rn]=_n(ye),Tn=ks("AlertDialogContent"),na=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,children:n,...o}=t,l=ce(a),d=r.useRef(null),p=ae(s,d),g=r.useRef(null);return e.jsx(Bs,{contentName:ye,titleName:ra,docsSlug:"alert-dialog",children:e.jsx(Dn,{scope:a,cancelRef:g,children:e.jsxs(Ks,{role:"alertdialog",...l,...o,ref:p,onOpenAutoFocus:C(o.onOpenAutoFocus,f=>{var i;f.preventDefault(),(i=g.current)==null||i.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[e.jsx(Tn,{children:n}),e.jsx(Pn,{contentRef:d})]})})})});na.displayName=ye;var ra="AlertDialogTitle",oa=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...n}=t,o=ce(a);return e.jsx(zs,{...o,...n,ref:s})});oa.displayName=ra;var ia="AlertDialogDescription",ca=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...n}=t,o=ce(a);return e.jsx(Hs,{...o,...n,ref:s})});ca.displayName=ia;var In="AlertDialogAction",la=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...n}=t,o=ce(a);return e.jsx(Gt,{...o,...n,ref:s})});la.displayName=In;var da="AlertDialogCancel",ua=r.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...n}=t,{cancelRef:o}=Rn(da,a),l=ce(a),d=ae(s,o);return e.jsx(Gt,{...l,...n,ref:d})});ua.displayName=da;var Pn=({contentRef:t})=>{const s=`\`${ye}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ye}\` by passing a \`${ia}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ye}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},An=ea,On=ta,Fn=aa,ma=sa,pa=na,ha=la,fa=ua,xa=oa,ga=ca;const Rt=An,Tt=On,Ln=Fn,va=r.forwardRef(({className:t,...s},a)=>e.jsx(ma,{className:I("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));va.displayName=ma.displayName;const st=r.forwardRef(({className:t,...s},a)=>e.jsxs(Ln,{children:[e.jsx(va,{}),e.jsx(pa,{ref:a,className:I("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));st.displayName=pa.displayName;const nt=({className:t,...s})=>e.jsx("div",{className:I("flex flex-col space-y-2 text-center sm:text-left",t),...s});nt.displayName="AlertDialogHeader";const rt=({className:t,...s})=>e.jsx("div",{className:I("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});rt.displayName="AlertDialogFooter";const ot=r.forwardRef(({className:t,...s},a)=>e.jsx(xa,{ref:a,className:I("text-lg font-semibold",t),...s}));ot.displayName=xa.displayName;const it=r.forwardRef(({className:t,...s},a)=>e.jsx(ga,{ref:a,className:I("text-sm text-muted-foreground",t),...s}));it.displayName=ga.displayName;const ct=r.forwardRef(({className:t,...s},a)=>e.jsx(ha,{ref:a,className:I(Lt({variant:"destructive"}),t),...s}));ct.displayName=ha.displayName;const lt=r.forwardRef(({className:t,...s},a)=>e.jsx(fa,{ref:a,className:I(Lt({variant:"default"}),"mt-2 sm:mt-0",t),...s}));lt.displayName=fa.displayName;const $n=({children:t})=>{const[s,a]=r.useState(!1),[n,o]=r.useState(!1),[l,d]=r.useState(!1),[p,g]=r.useState([]),[f,i]=r.useState(!1),[c,h]=r.useState(null),[u,v]=r.useState({name:"",email:"",email_type:"to"}),{toast:j}=Te(),b=async()=>{try{i(!0);const S=await(await G("https://digio.pgn.co.id/lisa_backend/email/get",{method:"GET",headers:{"Content-Type":"application/json"}})).json();S.status===200?(g(S.data),(!S.data||S.data.length===0)&&j({title:"Info",description:"Tidak ada penerima email ditemukan",variant:"warning"})):S.status===404?(g([]),j({title:"Info",description:"Belum ada data penerima email",variant:"warning"})):(g([]),j({title:"Error",description:S.data||"Gagal memuat data penerima email",variant:"destructive"}))}catch(x){j({title:"Error",description:"Gagal memuat data penerima email: "+(x instanceof Error?x.message:"Unknown error"),variant:"destructive"})}finally{i(!1)}};r.useEffect(()=>{s&&b()},[s]);const E=async()=>{if(!u.name||!u.email||!u.email_type){j({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const S=await(await G("https://digio.pgn.co.id/lisa_backend/email/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json();S.status===201?(j({title:"Berhasil",description:"Penerima email berhasil ditambahkan",variant:"success"}),v({name:"",email:"",email_type:"to"}),o(!1),b()):j({title:"Error",description:S.data||"Gagal menambahkan penerima email",variant:"destructive"})}catch{j({title:"Error",description:"Terjadi kesalahan saat menambahkan penerima email",variant:"destructive"})}},P=async()=>{if(!c||!u.name||!u.email||!u.email_type){j({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const S=await(await G("https://digio.pgn.co.id/lisa_backend/email/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:c.uuid,...u})})).json();S.status===200?(j({title:"Berhasil",description:"Penerima email berhasil diperbarui",variant:"success"}),v({name:"",email:"",email_type:"to"}),h(null),d(!1),b()):j({title:"Error",description:S.data||"Gagal memperbarui penerima email",variant:"destructive"})}catch(x){console.error("Error updating email recipient:",x),j({title:"Error",description:"Terjadi kesalahan saat memperbarui penerima email",variant:"destructive"})}},M=async x=>{try{const S=await G("https://digio.pgn.co.id/lisa_backend/email/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:x})});if(S.status===204)j({title:"Berhasil",description:"Penerima email berhasil dihapus",variant:"success"}),b();else{let w="Gagal menghapus penerima email";try{w=(await S.json()).data||w}catch{}j({title:"Error",description:w,variant:"destructive"})}}catch(S){console.error("Error deleting email recipient:",S),j({title:"Error",description:"Terjadi kesalahan saat menghapus penerima email",variant:"destructive"})}},D=x=>{h(x),v({name:x.name,email:x.email,email_type:x.email_type}),d(!0)},W=x=>{switch(x){case"to":return"bg-success text-primary-foreground";case"cc":return"bg-warning text-secondary-foreground";case"bcc":return"bg-primary text-muted-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{open:s,onOpenChange:a,children:[e.jsx(Ct,{asChild:!0,children:t}),e.jsxs(ge,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsxs(ve,{className:"shrink-0",children:[e.jsxs(we,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-5 h-5"}),"Kelola Penerima Email"]}),e.jsx(je,{className:"text-left",children:"Kelola daftar penerima email untuk notifikasi sistem"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto min-h-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(xe,{open:n,onOpenChange:o,children:[e.jsx(Ct,{asChild:!0,children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"w-4 h-4"}),e.jsx("span",{className:"sm:hidden",children:"Tambah"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Penerima"})]})}),e.jsxs(ge,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(ve,{children:[e.jsx(we,{children:"Tambah Penerima Email"}),e.jsx(je,{className:"text-left",children:"Tambahkan penerima email baru untuk notifikasi"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"name",children:"Nama"}),e.jsx(me,{id:"name",value:u.name,onChange:x=>v({...u,name:x.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"email",children:"Email"}),e.jsx(me,{id:"email",type:"email",value:u.email,onChange:x=>v({...u,email:x.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"email_type",children:"Tipe Email"}),e.jsxs(Xe,{value:u.email_type,onValueChange:x=>v({...u,email_type:x}),children:[e.jsx(Je,{children:e.jsx(Ze,{placeholder:"Pilih tipe email"})}),e.jsxs(Qe,{children:[e.jsx(ee,{value:"to",children:"To (Penerima Utama)"}),e.jsx(ee,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(ee,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(k,{variant:"destructive",onClick:()=>o(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(k,{variant:"default",onClick:E,className:"w-full sm:w-auto",children:"Tambah"})]})]})]})]})}),e.jsx("div",{className:"hidden md:block overflow-y-auto max-h-[50vh]",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(Ut,{children:[e.jsx(Bt,{children:e.jsxs(ie,{className:"border-b",children:[e.jsx(V,{className:"font-semibold",children:"Nama"}),e.jsx(V,{className:"font-semibold",children:"Email"}),e.jsx(V,{className:"font-semibold",children:"Tipe"}),e.jsx(V,{className:"text-right font-semibold",children:"Aksi"})]})}),e.jsx(Kt,{children:f?e.jsx(ie,{children:e.jsx(O,{colSpan:4,className:"text-center py-8",children:"Memuat data..."})}):p.length===0?e.jsx(ie,{children:e.jsx(O,{colSpan:4,className:"text-center py-8",children:"Belum ada penerima email"})}):p.map(x=>e.jsxs(ie,{className:"border-b last:border-b-0",children:[e.jsx(O,{className:"font-medium",children:x.name}),e.jsx(O,{children:x.email}),e.jsx(O,{children:e.jsx(Dt,{className:W(x.email_type),children:x.email_type.toUpperCase()})}),e.jsx(O,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(k,{variant:"default",size:"sm",onClick:()=>D(x),children:e.jsx(at,{className:"w-4 h-4"})}),e.jsxs(Rt,{children:[e.jsx(Tt,{asChild:!0,children:e.jsx(k,{variant:"destructive",size:"sm",children:e.jsx(Fe,{className:"w-4 h-4"})})}),e.jsxs(st,{children:[e.jsxs(nt,{children:[e.jsx(ot,{className:"text-center",children:"Hapus Penerima Email"}),e.jsxs(it,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',x.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(rt,{children:[e.jsx(lt,{children:"Batal"}),e.jsx(ct,{onClick:()=>M(x.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})})]},x.uuid))})]})})}),e.jsx("div",{className:"md:hidden space-y-3 overflow-y-auto max-h-[50vh]",children:f?e.jsx("div",{className:"text-center py-8",children:"Memuat data..."}):p.length===0?e.jsx("div",{className:"text-center py-8",children:"Belum ada penerima email"}):p.map(x=>e.jsx("div",{className:"border rounded-lg p-4 bg-card",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:x.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate mt-1",children:x.email}),e.jsx(Dt,{className:`${W(x.email_type)} mt-2`,children:x.email_type.toUpperCase()})]})}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(k,{size:"sm",variant:"default",onClick:()=>D(x),className:"flex-1",children:[e.jsx(at,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(Rt,{children:[e.jsx(Tt,{asChild:!0,children:e.jsxs(k,{size:"sm",variant:"destructive",className:"flex-1",children:[e.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Hapus"]})}),e.jsxs(st,{children:[e.jsxs(nt,{children:[e.jsx(ot,{children:"Hapus Penerima Email"}),e.jsxs(it,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',x.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(rt,{children:[e.jsx(lt,{children:"Batal"}),e.jsx(ct,{onClick:()=>M(x.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})]})},x.uuid))})]})]})]}),e.jsx(xe,{open:l,onOpenChange:d,children:e.jsxs(ge,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(ve,{children:[e.jsx(we,{children:"Edit Penerima Email"}),e.jsx(je,{children:"Ubah informasi penerima email yang sudah ada"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"edit-name",children:"Nama"}),e.jsx(me,{id:"edit-name",value:u.name,onChange:x=>v({...u,name:x.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"edit-email",children:"Email"}),e.jsx(me,{id:"edit-email",type:"email",value:u.email,onChange:x=>v({...u,email:x.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{htmlFor:"edit-email_type",children:"Tipe Email"}),e.jsxs(Xe,{value:u.email_type,onValueChange:x=>v({...u,email_type:x}),children:[e.jsx(Je,{children:e.jsx(Ze,{placeholder:"Pilih tipe email"})}),e.jsxs(Qe,{children:[e.jsx(ee,{value:"to",children:"To (Penerima Utama)"}),e.jsx(ee,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(ee,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(k,{variant:"destructive",onClick:()=>d(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(k,{variant:"default",onClick:P,className:"w-full sm:w-auto",children:"Simpan"})]})]})]})})]})},Gn=({open:t,onOpenChange:s,onSuccess:a})=>{const[n,o]=r.useState(!1),[l,d]=r.useState(null),[p,g]=r.useState(!1),[f,i]=r.useState([]),[c,h]=r.useState(["09:00"]),{toast:u}=Te(),v=[{value:"1",label:"Senin"},{value:"2",label:"Selasa"},{value:"3",label:"Rabu"},{value:"4",label:"Kamis"},{value:"5",label:"Jumat"},{value:"6",label:"Sabtu"},{value:"0",label:"Minggu"}];r.useEffect(()=>{t&&j()},[t]);const j=async()=>{try{const _=await(await G("https://digio.pgn.co.id/lisa_backend/cron/running")).json();_.status===200&&_.data&&_.data.length>0?(d(_.data[0]),g(!0),b(_.data[0].time_schedule)):(g(!1),i(["1","2","3","4","5"]),h(["09:00","15:00"]))}catch(w){console.error("Error checking existing schedule:",w),g(!1),i(["1","2","3","4","5"]),h(["09:00","15:00"])}},b=w=>{const _=w.split(" ");if(_.length===5){const[R,Y,,,L]=_,q=Y.split(",").map(ne=>`${ne.padStart(2,"0")}:${R.padStart(2,"0")}`);if(h(q),L.includes("-")){const[ne,K]=L.split("-").map(Number),fe=[];for(let X=ne;X<=K;X++)fe.push(X.toString());i(fe)}else L.includes(",")?i(L.split(",")):i([L])}},E=()=>{var L;const w=[...new Set(c.map(B=>B.split(":")[0]))],_=((L=c[0])==null?void 0:L.split(":")[1])||"00",R=w.join(","),Y=f.sort((B,q)=>Number(B)-Number(q)).join(",");return`${_} ${R} * * ${Y}`},P=async()=>{if(f.length===0||c.length===0){u({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}o(!0);try{const w=E();if((await G("https://digio.pgn.co.id/lisa_backend/cron/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"sendEmail",time_schedule:w,is_running:!0})})).ok)u({title:"Notifikasi berhasil disimpan dan diaktifkan",description:"Notifikasi telah dijadwalkan sesuai pengaturan",variant:"success"}),a(),s(!1);else throw new Error("Failed to save schedule")}catch(w){console.error("Error saving schedule:",w),u({title:"Error",description:"Gagal menyimpan penjadwalan",variant:"destructive"})}finally{o(!1)}},M=async()=>{if(f.length===0||c.length===0){u({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}o(!0);try{const w=E();if((await G("https://digio.pgn.co.id/lisa_backend/cron/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:l.uuid,time_schedule:w,is_running:!0})})).ok)u({title:"Notifikasi berhasil diperbarui dan diaktifkan",description:"Notifikasi telah dijadwalkan ulang sesuai pengaturan",variant:"success"}),a(),s(!1);else throw new Error("Failed to update schedule")}catch(w){console.error("Error updating schedule:",w),u({title:"Error",description:"Gagal memperbarui penjadwalan",variant:"destructive"})}finally{o(!1)}},D=()=>{h([...c,"09:00"])},W=w=>{c.length>1&&h(c.filter((_,R)=>R!==w))},x=(w,_)=>{const R=[...c];R[w]=_,h(R)},S=w=>{f.includes(w)?i(f.filter(_=>_!==w)):i([...f,w])};return e.jsx(xe,{open:t,onOpenChange:s,children:e.jsxs(ge,{className:"sm:max-w-md",children:[e.jsxs(ve,{className:"shrink-0",children:[e.jsxs(we,{className:"flex items-center gap-2",children:[e.jsx(wn,{className:"w-5 h-5"}),"Pengaturan Penjadwalan Notifikasi"]}),e.jsx(je,{className:"text-left",children:"Atur hari dan waktu untuk pengiriman notifikasi"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(te,{className:"text-sm font-medium",children:"Hari"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:v.map(w=>e.jsx(k,{type:"button",variant:f.includes(w.value)?"default":"outline",size:"sm",onClick:()=>S(w.value),className:"text-xs",children:w.label},w.value))})]}),e.jsxs("div",{children:[e.jsx(te,{className:"text-sm font-medium",children:"Waktu"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[c.map((w,_)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{type:"time",value:w,onChange:R=>x(_,R.target.value),className:"flex-1"}),c.length>1&&e.jsx(k,{type:"button",variant:"destructive",size:"sm",onClick:()=>W(_),children:e.jsx(Fe,{className:"w-4 h-4"})})]},_)),e.jsxs(k,{type:"button",variant:"warning",size:"sm",onClick:D,className:"w-full",children:[e.jsx(ft,{className:"w-4 h-4"}),"Tambah Waktu"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(k,{variant:"destructive",onClick:()=>s(!1),className:"flex-1",children:"Batal"}),p?e.jsx(k,{onClick:M,disabled:n,className:"flex-1",children:n?"Memperbarui...":"Perbarui & Aktifkan"}):e.jsx(k,{onClick:P,disabled:n,className:"flex-1",children:n?"Menyimpan...":"Simpan & Aktifkan"})]})]})]})})},Un=({onLogout:t})=>{const[s,a]=r.useState(!1),[n,o]=r.useState(!1),[l,d]=r.useState(!1),{toast:p}=Te(),{theme:g,setTheme:f}=_s();r.useEffect(()=>{o(window.self!==window.top)},[]),r.useEffect(()=>{i()},[]);const i=async()=>{try{const v=await(await G("https://digio.pgn.co.id/lisa_backend/cron/running")).json();v.status===404&&(a(!1),p({title:"Penjadwalan notifikasi belum tersedia",description:"Aktifkan notifikasi untuk membuat jadwal pengiriman notifikasi",variant:"destructive"})),v.status===200&&v.data[0].is_running===!0&&a(!0),v.status===200&&v.data[0].is_running===!1&&a(!1)}catch(u){console.error("Error checking notification status:",u)}},c=async u=>{if(u)d(!0);else try{const j=await(await G("https://digio.pgn.co.id/lisa_backend/cron/running")).json();if(j.status===200&&j.data&&j.data.length>0){const b=j.data[0].uuid;(await G("https://digio.pgn.co.id/lisa_backend/cron/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:b,is_running:!1})})).ok&&(a(!1),p({title:"Notifikasi dinonaktifkan",description:"Notifikasi telah dinonaktifkan",variant:"destructive"}))}}catch(v){console.error("Error disabling notification:",v),p({title:"Error",description:"Terjadi kesalahan saat menonaktifkan notifikasi",variant:"destructive"})}},h=()=>{a(!0),i()};return e.jsxs("header",{className:"bg-card border-b border-border shadow-sm sticky top-0 z-10",children:[e.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("img",{src:g==="dark"?"/lisa/logo-dark.png":"/lisa/logo-white.png",alt:"Lisensi Aset Logo",className:"h-8 w-auto sm:h-8 object-contain"}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-foreground",children:"Lisensi Aset"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sistem Monitoring Lisensi Aset"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx($n,{children:e.jsxs(k,{variant:"default",size:"sm",className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(Ht,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Email"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(ln,{className:`w-4 h-4 sm:w-5 sm:h-5 ${s?"text-primary":"text-muted-foreground"}`}),e.jsx(Zt,{checked:s,onCheckedChange:c,"aria-label":"Toggle notifications",className:"scale-75 sm:scale-100"}),e.jsx("span",{className:"hidden sm:inline text-sm text-muted-foreground",children:s?"Aktif":"Nonaktif"})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>f(g==="dark"?"light":"dark"),className:"px-2 sm:px-3 py-1 sm:py-2",children:g==="dark"?e.jsx(vn,{className:"w-4 h-4"}):e.jsx(gn,{className:"w-4 h-4"})}),!n&&e.jsxs(k,{variant:"destructive",size:"sm",onClick:t,className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(xn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),e.jsx(Gn,{open:l,onOpenChange:d,onSuccess:h})]})},Bn=r.forwardRef((t,s)=>{const[a,n]=r.useState([]),[o,l]=r.useState(!0),[d,p]=r.useState(null),{toast:g}=Te();r.useEffect(()=>{f()},[]);const f=async()=>{try{const c=await(await G("https://digio.pgn.co.id/lisa_backend/home/get")).json();if(c.status===200&&c.data){const h=c.data.map(u=>{switch(u.status){case"secure":return{title:"Lisensi Aman",count:u.count,total:u.total_data,icon:e.jsx(Ss,{className:"w-6 h-6 sm:w-8 sm:h-8"}),color:"text-success-foreground",bgColor:"bg-success"};case"will_expire":return{title:"Akan Kadaluarsa",count:u.count,total:u.total_data,icon:e.jsx(tn,{className:"w-6 h-6 sm:w-8 sm:h-8"}),color:"text-warning-foreground",bgColor:"bg-warning"};case"expired":return{title:"Sudah Kadaluarsa",count:u.count,total:u.total_data,icon:e.jsx(Pt,{className:"w-6 h-6 sm:w-8 sm:h-8"}),color:"text-destructive-foreground",bgColor:"bg-destructive"};default:return null}}).filter(Boolean);n(h),p(null)}else throw new Error("Data tidak valid")}catch{const c="Gagal memuat data status lisensi";p(c),g({title:"Error",description:c,variant:"destructive"})}finally{l(!1)}};return r.useImperativeHandle(s,()=>({refreshData:f})),o?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[1,2,3].map(i=>e.jsxs(We,{className:"overflow-hidden animate-pulse",children:[e.jsxs(St,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-20 sm:w-24"}),e.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-muted rounded-lg"})]}),e.jsxs(Mt,{children:[e.jsx("div",{className:"h-6 sm:h-8 bg-muted rounded w-12 sm:w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-24 sm:w-32"})]})]},i))}):d?e.jsx(We,{className:"p-4 sm:p-6 border-destructive mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center space-x-2 text-destructive",children:[e.jsx(qe,{className:"w-5 h-5 sm:w-6 sm:h-6"}),e.jsx("p",{className:"text-sm sm:text-base",children:d})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:a.map((i,c)=>e.jsxs(We,{className:"overflow-hidden",children:[e.jsxs(St,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(en,{className:"text-sm sm:text-base lg:text-lg font-semibold text-muted-foreground",children:i.title}),e.jsx("div",{className:`p-2 sm:p-2 rounded-lg ${i.bgColor} ${i.color} flex items-center justify-center`,children:e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center",children:i.icon})})]}),e.jsxs(Mt,{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:i.count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i.count," dari ",i.total," lisensi"]})]})]},c))})}),Kn=r.memo(Bn);var Ye="rovingFocusGroup.onEntryFocus",zn={bubbles:!1,cancelable:!0},Ie="RovingFocusGroup",[dt,wa,Hn]=At(Ie),[Vn,ja]=Re(Ie,[Hn]),[Wn,Yn]=Vn(Ie),ya=r.forwardRef((t,s)=>e.jsx(dt.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(dt.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(qn,{...t,ref:s})})}));ya.displayName=Ie;var qn=r.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,orientation:n,loop:o=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:g,onEntryFocus:f,preventScrollOnEntryFocus:i=!1,...c}=t,h=r.useRef(null),u=ae(s,h),v=zt(l),[j,b]=pt({prop:d,defaultProp:p??null,onChange:g,caller:Ie}),[E,P]=r.useState(!1),M=ht(f),D=wa(a),W=r.useRef(!1),[x,S]=r.useState(0);return r.useEffect(()=>{const w=h.current;if(w)return w.addEventListener(Ye,M),()=>w.removeEventListener(Ye,M)},[M]),e.jsx(Wn,{scope:a,orientation:n,dir:v,loop:o,currentTabStopId:j,onItemFocus:r.useCallback(w=>b(w),[b]),onItemShiftTab:r.useCallback(()=>P(!0),[]),onFocusableItemAdd:r.useCallback(()=>S(w=>w+1),[]),onFocusableItemRemove:r.useCallback(()=>S(w=>w-1),[]),children:e.jsx(se.div,{tabIndex:E||x===0?-1:0,"data-orientation":n,...c,ref:u,style:{outline:"none",...t.style},onMouseDown:C(t.onMouseDown,()=>{W.current=!0}),onFocus:C(t.onFocus,w=>{const _=!W.current;if(w.target===w.currentTarget&&_&&!E){const R=new CustomEvent(Ye,zn);if(w.currentTarget.dispatchEvent(R),!R.defaultPrevented){const Y=D().filter(K=>K.focusable),L=Y.find(K=>K.active),B=Y.find(K=>K.id===j),ne=[L,B,...Y].filter(Boolean).map(K=>K.ref.current);Ca(ne,i)}}W.current=!1}),onBlur:C(t.onBlur,()=>P(!1))})})}),ba="RovingFocusGroupItem",Na=r.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,focusable:n=!0,active:o=!1,tabStopId:l,children:d,...p}=t,g=et(),f=l||g,i=Yn(ba,a),c=i.currentTabStopId===f,h=wa(a),{onFocusableItemAdd:u,onFocusableItemRemove:v,currentTabStopId:j}=i;return r.useEffect(()=>{if(n)return u(),()=>v()},[n,u,v]),e.jsx(dt.ItemSlot,{scope:a,id:f,focusable:n,active:o,children:e.jsx(se.span,{tabIndex:c?0:-1,"data-orientation":i.orientation,...p,ref:s,onMouseDown:C(t.onMouseDown,b=>{n?i.onItemFocus(f):b.preventDefault()}),onFocus:C(t.onFocus,()=>i.onItemFocus(f)),onKeyDown:C(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){i.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const E=Zn(b,i.orientation,i.dir);if(E!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let M=h().filter(D=>D.focusable).map(D=>D.ref.current);if(E==="last")M.reverse();else if(E==="prev"||E==="next"){E==="prev"&&M.reverse();const D=M.indexOf(b.currentTarget);M=i.loop?Qn(M,D+1):M.slice(D+1)}setTimeout(()=>Ca(M))}}),children:typeof d=="function"?d({isCurrentTabStop:c,hasTabStop:j!=null}):d})})});Na.displayName=ba;var Xn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Jn(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Zn(t,s,a){const n=Jn(t.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Xn[n]}function Ca(t,s=!1){const a=document.activeElement;for(const n of t)if(n===a||(n.focus({preventScroll:s}),document.activeElement!==a))return}function Qn(t,s){return t.map((a,n)=>t[(s+n)%t.length])}var er=ya,tr=Na,ut=["Enter"," "],ar=["ArrowDown","PageUp","Home"],ka=["ArrowUp","PageDown","End"],sr=[...ar,...ka],nr={ltr:[...ut,"ArrowRight"],rtl:[...ut,"ArrowLeft"]},rr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pe="Menu",[Ee,or,ir]=At(Pe),[pe,_a]=Re(Pe,[ir,Ot,ja]),Be=Ot(),Sa=ja(),[cr,he]=pe(Pe),[lr,Ae]=pe(Pe),Ma=t=>{const{__scopeMenu:s,open:a=!1,children:n,dir:o,onOpenChange:l,modal:d=!0}=t,p=Be(s),[g,f]=r.useState(null),i=r.useRef(!1),c=ht(l),h=zt(o);return r.useEffect(()=>{const u=()=>{i.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>i.current=!1;return document.addEventListener("keydown",u,{capture:!0}),()=>{document.removeEventListener("keydown",u,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),e.jsx(As,{...p,children:e.jsx(cr,{scope:s,open:a,onOpenChange:c,content:g,onContentChange:f,children:e.jsx(lr,{scope:s,onClose:r.useCallback(()=>c(!1),[c]),isUsingKeyboardRef:i,dir:h,modal:d,children:n})})})};Ma.displayName=Pe;var dr="MenuAnchor",xt=r.forwardRef((t,s)=>{const{__scopeMenu:a,...n}=t,o=Be(a);return e.jsx(Ms,{...o,...n,ref:s})});xt.displayName=dr;var gt="MenuPortal",[ur,Ea]=pe(gt,{forceMount:void 0}),Da=t=>{const{__scopeMenu:s,forceMount:a,children:n,container:o}=t,l=he(gt,s);return e.jsx(ur,{scope:s,forceMount:a,children:e.jsx(Ge,{present:a||l.open,children:e.jsx(Is,{asChild:!0,container:o,children:n})})})};Da.displayName=gt;var Z="MenuContent",[mr,vt]=pe(Z),Ra=r.forwardRef((t,s)=>{const a=Ea(Z,t.__scopeMenu),{forceMount:n=a.forceMount,...o}=t,l=he(Z,t.__scopeMenu),d=Ae(Z,t.__scopeMenu);return e.jsx(Ee.Provider,{scope:t.__scopeMenu,children:e.jsx(Ge,{present:n||l.open,children:e.jsx(Ee.Slot,{scope:t.__scopeMenu,children:d.modal?e.jsx(pr,{...o,ref:s}):e.jsx(hr,{...o,ref:s})})})})}),pr=r.forwardRef((t,s)=>{const a=he(Z,t.__scopeMenu),n=r.useRef(null),o=ae(s,n);return r.useEffect(()=>{const l=n.current;if(l)return an(l)},[]),e.jsx(wt,{...t,ref:o,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:C(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),hr=r.forwardRef((t,s)=>{const a=he(Z,t.__scopeMenu);return e.jsx(wt,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),fr=Ps("MenuContent.ScrollLock"),wt=r.forwardRef((t,s)=>{const{__scopeMenu:a,loop:n=!1,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:d,disableOutsidePointerEvents:p,onEntryFocus:g,onEscapeKeyDown:f,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:h,onDismiss:u,disableOutsideScroll:v,...j}=t,b=he(Z,a),E=Ae(Z,a),P=Be(a),M=Sa(a),D=or(a),[W,x]=r.useState(null),S=r.useRef(null),w=ae(s,S,b.onContentChange),_=r.useRef(0),R=r.useRef(""),Y=r.useRef(0),L=r.useRef(null),B=r.useRef("right"),q=r.useRef(0),ne=v?rn:r.Fragment,K=v?{as:fr,allowPinchZoom:!0}:void 0,fe=y=>{var le,Q;const z=R.current+y,J=D().filter(F=>!F.disabled),H=document.activeElement,re=(le=J.find(F=>F.ref.current===H))==null?void 0:le.textValue,be=J.map(F=>F.textValue),Ne=Sr(be,z,re),de=(Q=J.find(F=>F.textValue===Ne))==null?void 0:Q.ref.current;(function F(Ce){R.current=Ce,window.clearTimeout(_.current),Ce!==""&&(_.current=window.setTimeout(()=>F(""),1e3))})(z),de&&setTimeout(()=>de.focus())};r.useEffect(()=>()=>window.clearTimeout(_.current),[]),sn();const X=r.useCallback(y=>{var J,H;return B.current===((J=L.current)==null?void 0:J.side)&&Er(y,(H=L.current)==null?void 0:H.area)},[]);return e.jsx(mr,{scope:a,searchRef:R,onItemEnter:r.useCallback(y=>{X(y)&&y.preventDefault()},[X]),onItemLeave:r.useCallback(y=>{var z;X(y)||((z=S.current)==null||z.focus(),x(null))},[X]),onTriggerLeave:r.useCallback(y=>{X(y)&&y.preventDefault()},[X]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:r.useCallback(y=>{L.current=y},[]),children:e.jsx(ne,{...K,children:e.jsx(nn,{asChild:!0,trapped:o,onMountAutoFocus:C(l,y=>{var z;y.preventDefault(),(z=S.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(Es,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:f,onPointerDownOutside:i,onFocusOutside:c,onInteractOutside:h,onDismiss:u,children:e.jsx(er,{asChild:!0,...M,dir:E.dir,orientation:"vertical",loop:n,currentTabStopId:W,onCurrentTabStopIdChange:x,onEntryFocus:C(g,y=>{E.isUsingKeyboardRef.current||y.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ds,{role:"menu","aria-orientation":"vertical","data-state":Wa(b.open),"data-radix-menu-content":"",dir:E.dir,...P,...j,ref:w,style:{outline:"none",...j.style},onKeyDown:C(j.onKeyDown,y=>{const J=y.target.closest("[data-radix-menu-content]")===y.currentTarget,H=y.ctrlKey||y.altKey||y.metaKey,re=y.key.length===1;J&&(y.key==="Tab"&&y.preventDefault(),!H&&re&&fe(y.key));const be=S.current;if(y.target!==be||!sr.includes(y.key))return;y.preventDefault();const de=D().filter(le=>!le.disabled).map(le=>le.ref.current);ka.includes(y.key)&&de.reverse(),kr(de)}),onBlur:C(t.onBlur,y=>{y.currentTarget.contains(y.target)||(window.clearTimeout(_.current),R.current="")}),onPointerMove:C(t.onPointerMove,De(y=>{const z=y.target,J=q.current!==y.clientX;if(y.currentTarget.contains(z)&&J){const H=y.clientX>q.current?"right":"left";B.current=H,q.current=y.clientX}}))})})})})})})});Ra.displayName=Z;var xr="MenuGroup",jt=r.forwardRef((t,s)=>{const{__scopeMenu:a,...n}=t;return e.jsx(se.div,{role:"group",...n,ref:s})});jt.displayName=xr;var gr="MenuLabel",Ta=r.forwardRef((t,s)=>{const{__scopeMenu:a,...n}=t;return e.jsx(se.div,{...n,ref:s})});Ta.displayName=gr;var Le="MenuItem",It="menu.itemSelect",Ke=r.forwardRef((t,s)=>{const{disabled:a=!1,onSelect:n,...o}=t,l=r.useRef(null),d=Ae(Le,t.__scopeMenu),p=vt(Le,t.__scopeMenu),g=ae(s,l),f=r.useRef(!1),i=()=>{const c=l.current;if(!a&&c){const h=new CustomEvent(It,{bubbles:!0,cancelable:!0});c.addEventListener(It,u=>n==null?void 0:n(u),{once:!0}),Ts(c,h),h.defaultPrevented?f.current=!1:d.onClose()}};return e.jsx(Ia,{...o,ref:g,disabled:a,onClick:C(t.onClick,i),onPointerDown:c=>{var h;(h=t.onPointerDown)==null||h.call(t,c),f.current=!0},onPointerUp:C(t.onPointerUp,c=>{var h;f.current||(h=c.currentTarget)==null||h.click()}),onKeyDown:C(t.onKeyDown,c=>{const h=p.searchRef.current!=="";a||h&&c.key===" "||ut.includes(c.key)&&(c.currentTarget.click(),c.preventDefault())})})});Ke.displayName=Le;var Ia=r.forwardRef((t,s)=>{const{__scopeMenu:a,disabled:n=!1,textValue:o,...l}=t,d=vt(Le,a),p=Sa(a),g=r.useRef(null),f=ae(s,g),[i,c]=r.useState(!1),[h,u]=r.useState("");return r.useEffect(()=>{const v=g.current;v&&u((v.textContent??"").trim())},[l.children]),e.jsx(Ee.ItemSlot,{scope:a,disabled:n,textValue:o??h,children:e.jsx(tr,{asChild:!0,...p,focusable:!n,children:e.jsx(se.div,{role:"menuitem","data-highlighted":i?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...l,ref:f,onPointerMove:C(t.onPointerMove,De(v=>{n?d.onItemLeave(v):(d.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:C(t.onPointerLeave,De(v=>d.onItemLeave(v))),onFocus:C(t.onFocus,()=>c(!0)),onBlur:C(t.onBlur,()=>c(!1))})})})}),vr="MenuCheckboxItem",Pa=r.forwardRef((t,s)=>{const{checked:a=!1,onCheckedChange:n,...o}=t;return e.jsx($a,{scope:t.__scopeMenu,checked:a,children:e.jsx(Ke,{role:"menuitemcheckbox","aria-checked":$e(a)?"mixed":a,...o,ref:s,"data-state":bt(a),onSelect:C(o.onSelect,()=>n==null?void 0:n($e(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Pa.displayName=vr;var Aa="MenuRadioGroup",[wr,jr]=pe(Aa,{value:void 0,onValueChange:()=>{}}),Oa=r.forwardRef((t,s)=>{const{value:a,onValueChange:n,...o}=t,l=ht(n);return e.jsx(wr,{scope:t.__scopeMenu,value:a,onValueChange:l,children:e.jsx(jt,{...o,ref:s})})});Oa.displayName=Aa;var Fa="MenuRadioItem",La=r.forwardRef((t,s)=>{const{value:a,...n}=t,o=jr(Fa,t.__scopeMenu),l=a===o.value;return e.jsx($a,{scope:t.__scopeMenu,checked:l,children:e.jsx(Ke,{role:"menuitemradio","aria-checked":l,...n,ref:s,"data-state":bt(l),onSelect:C(n.onSelect,()=>{var d;return(d=o.onValueChange)==null?void 0:d.call(o,a)},{checkForDefaultPrevented:!1})})})});La.displayName=Fa;var yt="MenuItemIndicator",[$a,yr]=pe(yt,{checked:!1}),Ga=r.forwardRef((t,s)=>{const{__scopeMenu:a,forceMount:n,...o}=t,l=yr(yt,a);return e.jsx(Ge,{present:n||$e(l.checked)||l.checked===!0,children:e.jsx(se.span,{...o,ref:s,"data-state":bt(l.checked)})})});Ga.displayName=yt;var br="MenuSeparator",Ua=r.forwardRef((t,s)=>{const{__scopeMenu:a,...n}=t;return e.jsx(se.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});Ua.displayName=br;var Nr="MenuArrow",Ba=r.forwardRef((t,s)=>{const{__scopeMenu:a,...n}=t,o=Be(a);return e.jsx(Rs,{...o,...n,ref:s})});Ba.displayName=Nr;var Cr="MenuSub",[To,Ka]=pe(Cr),Me="MenuSubTrigger",za=r.forwardRef((t,s)=>{const a=he(Me,t.__scopeMenu),n=Ae(Me,t.__scopeMenu),o=Ka(Me,t.__scopeMenu),l=vt(Me,t.__scopeMenu),d=r.useRef(null),{pointerGraceTimerRef:p,onPointerGraceIntentChange:g}=l,f={__scopeMenu:t.__scopeMenu},i=r.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return r.useEffect(()=>i,[i]),r.useEffect(()=>{const c=p.current;return()=>{window.clearTimeout(c),g(null)}},[p,g]),e.jsx(xt,{asChild:!0,...f,children:e.jsx(Ia,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":o.contentId,"data-state":Wa(a.open),...t,ref:Ft(s,o.onTriggerChange),onClick:c=>{var h;(h=t.onClick)==null||h.call(t,c),!(t.disabled||c.defaultPrevented)&&(c.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:C(t.onPointerMove,De(c=>{l.onItemEnter(c),!c.defaultPrevented&&!t.disabled&&!a.open&&!d.current&&(l.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{a.onOpenChange(!0),i()},100))})),onPointerLeave:C(t.onPointerLeave,De(c=>{var u,v;i();const h=(u=a.content)==null?void 0:u.getBoundingClientRect();if(h){const j=(v=a.content)==null?void 0:v.dataset.side,b=j==="right",E=b?-5:5,P=h[b?"left":"right"],M=h[b?"right":"left"];l.onPointerGraceIntentChange({area:[{x:c.clientX+E,y:c.clientY},{x:P,y:h.top},{x:M,y:h.top},{x:M,y:h.bottom},{x:P,y:h.bottom}],side:j}),window.clearTimeout(p.current),p.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(c),c.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:C(t.onKeyDown,c=>{var u;const h=l.searchRef.current!=="";t.disabled||h&&c.key===" "||nr[n.dir].includes(c.key)&&(a.onOpenChange(!0),(u=a.content)==null||u.focus(),c.preventDefault())})})})});za.displayName=Me;var Ha="MenuSubContent",Va=r.forwardRef((t,s)=>{const a=Ea(Z,t.__scopeMenu),{forceMount:n=a.forceMount,...o}=t,l=he(Z,t.__scopeMenu),d=Ae(Z,t.__scopeMenu),p=Ka(Ha,t.__scopeMenu),g=r.useRef(null),f=ae(s,g);return e.jsx(Ee.Provider,{scope:t.__scopeMenu,children:e.jsx(Ge,{present:n||l.open,children:e.jsx(Ee.Slot,{scope:t.__scopeMenu,children:e.jsx(wt,{id:p.contentId,"aria-labelledby":p.triggerId,...o,ref:f,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:i=>{var c;d.isUsingKeyboardRef.current&&((c=g.current)==null||c.focus()),i.preventDefault()},onCloseAutoFocus:i=>i.preventDefault(),onFocusOutside:C(t.onFocusOutside,i=>{i.target!==p.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:C(t.onEscapeKeyDown,i=>{d.onClose(),i.preventDefault()}),onKeyDown:C(t.onKeyDown,i=>{var u;const c=i.currentTarget.contains(i.target),h=rr[d.dir].includes(i.key);c&&h&&(l.onOpenChange(!1),(u=p.trigger)==null||u.focus(),i.preventDefault())})})})})})});Va.displayName=Ha;function Wa(t){return t?"open":"closed"}function $e(t){return t==="indeterminate"}function bt(t){return $e(t)?"indeterminate":t?"checked":"unchecked"}function kr(t){const s=document.activeElement;for(const a of t)if(a===s||(a.focus(),document.activeElement!==s))return}function _r(t,s){return t.map((a,n)=>t[(s+n)%t.length])}function Sr(t,s,a){const o=s.length>1&&Array.from(s).every(f=>f===s[0])?s[0]:s,l=a?t.indexOf(a):-1;let d=_r(t,Math.max(l,0));o.length===1&&(d=d.filter(f=>f!==a));const g=d.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return g!==a?g:void 0}function Mr(t,s){const{x:a,y:n}=t;let o=!1;for(let l=0,d=s.length-1;l<s.length;d=l++){const p=s[l],g=s[d],f=p.x,i=p.y,c=g.x,h=g.y;i>n!=h>n&&a<(c-f)*(n-i)/(h-i)+f&&(o=!o)}return o}function Er(t,s){if(!s)return!1;const a={x:t.clientX,y:t.clientY};return Mr(a,s)}function De(t){return s=>s.pointerType==="mouse"?t(s):void 0}var Dr=Ma,Rr=xt,Tr=Da,Ir=Ra,Pr=jt,Ar=Ta,Or=Ke,Fr=Pa,Lr=Oa,$r=La,Gr=Ga,Ur=Ua,Br=Ba,Kr=za,zr=Va,ze="DropdownMenu",[Hr,Io]=Re(ze,[_a]),U=_a(),[Vr,Ya]=Hr(ze),qa=t=>{const{__scopeDropdownMenu:s,children:a,dir:n,open:o,defaultOpen:l,onOpenChange:d,modal:p=!0}=t,g=U(s),f=r.useRef(null),[i,c]=pt({prop:o,defaultProp:l??!1,onChange:d,caller:ze});return e.jsx(Vr,{scope:s,triggerId:et(),triggerRef:f,contentId:et(),open:i,onOpenChange:c,onOpenToggle:r.useCallback(()=>c(h=>!h),[c]),modal:p,children:e.jsx(Dr,{...g,open:i,onOpenChange:c,dir:n,modal:p,children:a})})};qa.displayName=ze;var Xa="DropdownMenuTrigger",Ja=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,disabled:n=!1,...o}=t,l=Ya(Xa,a),d=U(a);return e.jsx(Rr,{asChild:!0,...d,children:e.jsx(se.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...o,ref:Ft(s,l.triggerRef),onPointerDown:C(t.onPointerDown,p=>{!n&&p.button===0&&p.ctrlKey===!1&&(l.onOpenToggle(),l.open||p.preventDefault())}),onKeyDown:C(t.onKeyDown,p=>{n||(["Enter"," "].includes(p.key)&&l.onOpenToggle(),p.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(p.key)&&p.preventDefault())})})})});Ja.displayName=Xa;var Wr="DropdownMenuPortal",Za=t=>{const{__scopeDropdownMenu:s,...a}=t,n=U(s);return e.jsx(Tr,{...n,...a})};Za.displayName=Wr;var Qa="DropdownMenuContent",es=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=Ya(Qa,a),l=U(a),d=r.useRef(!1);return e.jsx(Ir,{id:o.contentId,"aria-labelledby":o.triggerId,...l,...n,ref:s,onCloseAutoFocus:C(t.onCloseAutoFocus,p=>{var g;d.current||(g=o.triggerRef.current)==null||g.focus(),d.current=!1,p.preventDefault()}),onInteractOutside:C(t.onInteractOutside,p=>{const g=p.detail.originalEvent,f=g.button===0&&g.ctrlKey===!0,i=g.button===2||f;(!o.modal||i)&&(d.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});es.displayName=Qa;var Yr="DropdownMenuGroup",qr=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Pr,{...o,...n,ref:s})});qr.displayName=Yr;var Xr="DropdownMenuLabel",ts=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Ar,{...o,...n,ref:s})});ts.displayName=Xr;var Jr="DropdownMenuItem",as=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Or,{...o,...n,ref:s})});as.displayName=Jr;var Zr="DropdownMenuCheckboxItem",ss=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Fr,{...o,...n,ref:s})});ss.displayName=Zr;var Qr="DropdownMenuRadioGroup",eo=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Lr,{...o,...n,ref:s})});eo.displayName=Qr;var to="DropdownMenuRadioItem",ns=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx($r,{...o,...n,ref:s})});ns.displayName=to;var ao="DropdownMenuItemIndicator",rs=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Gr,{...o,...n,ref:s})});rs.displayName=ao;var so="DropdownMenuSeparator",os=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Ur,{...o,...n,ref:s})});os.displayName=so;var no="DropdownMenuArrow",ro=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Br,{...o,...n,ref:s})});ro.displayName=no;var oo="DropdownMenuSubTrigger",is=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(Kr,{...o,...n,ref:s})});is.displayName=oo;var io="DropdownMenuSubContent",cs=r.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...n}=t,o=U(a);return e.jsx(zr,{...o,...n,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cs.displayName=io;var co=qa,lo=Ja,uo=Za,ls=es,ds=ts,us=as,ms=ss,ps=ns,hs=rs,fs=os,xs=is,gs=cs;const mo=co,po=lo,ho=r.forwardRef(({className:t,inset:s,children:a,...n},o)=>e.jsxs(xs,{ref:o,className:I("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...n,children:[a,e.jsx(tt,{className:"ml-auto h-4 w-4"})]}));ho.displayName=xs.displayName;const fo=r.forwardRef(({className:t,...s},a)=>e.jsx(gs,{ref:a,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));fo.displayName=gs.displayName;const vs=r.forwardRef(({className:t,sideOffset:s=4,...a},n)=>e.jsx(uo,{children:e.jsx(ls,{ref:n,sideOffset:s,className:I("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));vs.displayName=ls.displayName;const mt=r.forwardRef(({className:t,inset:s,...a},n)=>e.jsx(us,{ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...a}));mt.displayName=us.displayName;const xo=r.forwardRef(({className:t,children:s,checked:a,...n},o)=>e.jsxs(ms,{ref:o,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hs,{children:e.jsx(Ys,{className:"h-4 w-4"})})}),s]}));xo.displayName=ms.displayName;const go=r.forwardRef(({className:t,children:s,...a},n)=>e.jsxs(ps,{ref:n,className:I("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hs,{children:e.jsx(dn,{className:"h-2 w-2 fill-current"})})}),s]}));go.displayName=ps.displayName;const vo=r.forwardRef(({className:t,inset:s,...a},n)=>e.jsx(ds,{ref:n,className:I("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...a}));vo.displayName=ds.displayName;const wo=r.forwardRef(({className:t,...s},a)=>e.jsx(fs,{ref:a,className:I("-mx-1 my-1 h-px bg-muted",t),...s}));wo.displayName=fs.displayName;const jo=({onDataChange:t})=>{const s=Os(),[a,n]=r.useState(""),[o,l]=r.useState([]),[d,p]=r.useState(!0),[g,f]=r.useState(!1),[i,c]=r.useState(null),[h,u]=r.useState(!1),[v,j]=r.useState(1),[b,E]=r.useState("10"),[P,M]=r.useState(1),[D,W]=r.useState("status_lisensi"),[x,S]=r.useState("asc"),{toast:w}=Te(),_=async(m=1,N=10,T,ke,ue)=>{try{let oe=`https://digio.pgn.co.id/lisa_backend/licenses/get?page=${m}&paginate=${N}&name=${T?encodeURIComponent(T):""}`;const Oe=ke||"status_lisensi",He=(ue||"asc").toUpperCase();oe+=`&sortField=${Oe}&sortOrder=${He}`;const _e=await(await G(oe)).json();return _e.status===200?(l(_e.data.docs),M(_e.data.pages),_e.data.docs):[]}catch{return w({title:"Error",description:"Terjadi kesalahan saat memuat data lisensi",variant:"destructive"}),[]}},R=r.useCallback(async m=>{p(!0);try{await _(v,parseInt(b),m,D,x)}catch(N){console.error("Error fetching data:",N)}finally{p(!1)}},[v,b,D,x]);r.useEffect(()=>{if(a){const m=setTimeout(()=>{R(a),j(1)},500);return()=>clearTimeout(m)}else R()},[v,b,a,D,x]);const[Y,L]=r.useState({}),B=m=>{const N={day:"2-digit",month:"long",year:"numeric"};return new Date(m).toLocaleDateString("id-ID",N)},q=m=>{switch(m){case 1:return{text:"Sudah Kadaluarsa",color:"bg-red-100 text-red-700 border-red-200",icon:Pt};case 2:return{text:"Akan Kadaluarsa",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:qe};case 3:return{text:"Aman",color:"bg-green-100 text-green-700 border-green-200",icon:cn};default:return{text:"Unknown",color:"bg-gray-100 text-gray-700 border-gray-200",icon:qe}}},ne=m=>{L(N=>({...N,[m]:!N[m]}))},K=m=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(m),fe=async()=>{try{p(!0);const T=await(await G("https://digio.pgn.co.id/lisa_backend/licenses/get?page=1&paginate=9999&name=")).json();if(T.status!==200||T.data.docs.length===0){w({title:"Info",description:"Tidak ada data yang bisa diekspor (data kosong)",variant:"warning"});return}const ue=T.data.docs.map(A=>({UUID:A.uuid,"Nama Aset":A.name,"Tanggal Mulai":B(A.start_date),"Tanggal Berakhir":B(A.end_date),Status:q(A.status_lisensi).text,Volume:A.volume,Satuan:A.satuan,"Harga Satuan":A.harga_satuan,"Total Harga":A.jumlah,Username:A.username,Password:A.password,Lokasi:A.lokasi_lisensi,Catatan:A.description,"Pengguna Terakhir":A.last_user_input})),oe=Se.json_to_sheet(ue),Oe=Se.book_new();Se.book_append_sheet(Oe,oe,"Data Lisensi");const He=[{wch:30},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:15},{wch:15},{wch:20},{wch:20},{wch:30},{wch:40},{wch:20}];oe["!cols"]=He;const Ve=Se.decode_range(oe["!ref"]||"A1");for(let A=Ve.s.c;A<=Ve.e.c;++A){const Nt=Se.encode_col(A)+"1";oe[Nt]&&(oe[Nt].s={font:{bold:!0},fill:{fgColor:{rgb:"EFEFEF"}},alignment:{horizontal:"center"}})}const bs=new Date().toISOString().split("T")[0];Qs(Oe,`Data_Lisensi_${bs}.xlsx`),w({title:"Export berhasil",description:"Data lisensi telah diekspor ke file Excel",variant:"success"})}catch{return}finally{p(!1)}},X=m=>{var T;const N=(T=m.target.files)==null?void 0:T[0];N&&c(N)},y=()=>{f(!0)},z=()=>{window.open("/lisa/Template_Upload_Data_Lisensi.xlsx","_blank")},[J,H]=r.useState(!1),[re,be]=r.useState(null),Ne=(m,N)=>{m==="Delete"?(be(N),H(!0)):m==="Edit"&&s(`/edit/${N.uuid}`)},de=async()=>{if(re)try{if((await G("https://digio.pgn.co.id/lisa_backend/licenses/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:re.uuid})})).ok)s("/"),w({title:"Berhasil",description:"Data lisensi berhasil dihapus",variant:"success"}),H(!1),R(a),t==null||t();else throw new Error("Gagal menghapus data")}catch{w({title:"Error",description:"Terjadi kesalahan saat menghapus data lisensi",variant:"destructive"})}},le=async()=>{if(!i){w({title:"Error",description:"Pilih file terlebih dahulu",variant:"destructive"});return}try{u(!0);const m=new FormData;m.append("file",i);const N=Ls("auth_name")||"";if(m.append("last_user_input",N),(await G("https://digio.pgn.co.id/lisa_backend/licenses/upload",{method:"POST",body:m})).ok)s("/"),w({title:"Import berhasil",description:"Data lisensi telah berhasil diimport",variant:"success"}),f(!1),c(null),R(a),t==null||t();else throw new Error("Import gagal")}catch{w({title:"Import gagal",description:"Terjadi kesalahan saat mengimport data",variant:"destructive"})}finally{u(!1)}},Q=r.useCallback(m=>{j(1),D===m?S(N=>N==="asc"?"desc":"asc"):(W(m),S("asc"))},[D]),F=r.useMemo(()=>m=>D!==m?e.jsx(qs,{className:"w-4 h-4 ml-1 opacity-50"}):x==="asc"?e.jsx(Xs,{className:"w-4 h-4 ml-1"}):e.jsx(Js,{className:"w-4 h-4 ml-1"}),[D,x]),[Ce,ws]=r.useState({}),js=m=>{ws(N=>({...N,[m]:!N[m]}))},ys=(m,N)=>{const T=[];T.push(1),m-2>2&&T.push("...");for(let ue=Math.max(2,m-2);ue<=Math.min(N-1,m+2);ue++)T.push(ue);return m+2<N-1&&T.push("..."),N>1&&T.push(N),T};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-foreground",children:"Daftar Lisensi Aset"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(k,{onClick:()=>s("/add"),className:"flex items-center justify-center gap-2 w-full sm:w-auto",variant:"success",children:[e.jsx(ft,{className:"w-4 h-4"}),"Tambah Lisensi"]}),e.jsxs(k,{onClick:()=>s("/prices"),variant:"warning",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(un,{className:"w-4 h-4"}),"Harga Lisensi"]}),e.jsxs(mo,{children:[e.jsx(po,{asChild:!0,children:e.jsxs(k,{variant:"default",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(mn,{className:"w-4 h-4"}),"Excel",e.jsx(kt,{className:"w-4 h-4"})]})}),e.jsxs(vs,{children:[e.jsxs(mt,{onClick:y,children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Import Data"]}),e.jsxs(mt,{onClick:fe,children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm w-full md:w-auto",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(me,{placeholder:"Cari lisensi...",value:a,onChange:m=>n(m.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto justify-end",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tampilkan:"}),e.jsxs(Xe,{value:b,onValueChange:E,children:[e.jsx(Je,{className:"w-16",children:e.jsx(Ze,{})}),e.jsxs(Qe,{children:[e.jsx(ee,{value:"10",children:"10"}),e.jsx(ee,{value:"25",children:"25"}),e.jsx(ee,{value:"50",children:"50"}),e.jsx(ee,{value:"100",children:"100"})]})]})]})]}),e.jsx(xe,{open:g,onOpenChange:f,children:e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(we,{children:"Import Data Lisensi"}),e.jsx(je,{children:"Upload file Excel untuk mengimport data lisensi baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Template Excel"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Gunakan template yang telah disediakan untuk mengimport data"}),e.jsxs(k,{variant:"secondary",size:"sm",onClick:z,className:"w-full",children:[e.jsx(_t,{className:"w-4 h-4 mr-2"}),"Download Template"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(te,{children:"Upload File"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pilih file Excel yang akan diimport"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(me,{type:"file",accept:".xlsx",onChange:X,disabled:h}),e.jsx(k,{onClick:le,disabled:!i||h,className:"w-full",children:h?e.jsxs(e.Fragment,{children:[e.jsx(fn,{className:"w-4 h-4 mr-2 animate-spin"}),"Mengupload..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})]})}),e.jsx(xe,{open:J,onOpenChange:H,children:e.jsxs(ge,{children:[e.jsxs(ve,{children:[e.jsx(we,{children:"Konfirmasi Hapus"}),e.jsx(je,{children:"Konfirmasi penghapusan data lisensi yang dipilih"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{children:['Apakah Anda yakin ingin menghapus lisensi "',re==null?void 0:re.name,'"?']}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(k,{variant:"default",onClick:()=>H(!1),children:"Batal"}),e.jsx(k,{variant:"destructive",onClick:de,children:"Hapus"})]})]})}),e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(Ut,{className:"[&_tr>*]:border-r [&_tr>*:last-child]:border-r-0 [&_tr]:border-b [&_tr:last-child]:border-b-0",children:[e.jsx(Bt,{children:e.jsxs(ie,{className:"bg-muted/50 border-b",children:[e.jsx(V,{className:"w-[120px] text-center whitespace-nowrap",children:"Aksi"}),e.jsx(V,{className:"w-[200px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("name"),children:e.jsxs("div",{className:"flex items-center",children:["Nama Aset",F("name")]})}),e.jsx(V,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("start_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Mulai",F("start_date")]})}),e.jsx(V,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Berakhir",F("end_date")]})}),e.jsx(V,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Status",F("end_date")]})}),e.jsx(V,{className:"w-[80px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("volume"),children:e.jsxs("div",{className:"flex items-center",children:["Volume",F("volume")]})}),e.jsx(V,{className:"w-[100px] whitespace-nowrap",children:"Satuan"}),e.jsx(V,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("harga_satuan"),children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",F("harga_satuan")]})}),e.jsx(V,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>Q("jumlah"),children:e.jsxs("div",{className:"flex items-center",children:["Total Harga",F("jumlah")]})})]})}),e.jsx(Kt,{className:"[&_tr:last-child]:border-b-0",children:d?e.jsx(ie,{children:e.jsx(O,{colSpan:9,className:"text-center py-8",children:"Memuat data..."})}):o.length===0?e.jsx(ie,{children:e.jsx(O,{colSpan:9,className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"})}):o.map((m,N)=>(q(m.status_lisensi),e.jsxs(Fs.Fragment,{children:[e.jsxs(ie,{className:"hover:bg-muted/30",children:[e.jsx(O,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(k,{variant:"success",size:"sm",onClick:()=>js(N),children:Ce[N]?e.jsx(kt,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"})}),e.jsx(k,{variant:"warning",size:"sm",onClick:()=>Ne("Edit",m),children:e.jsx(at,{className:"w-4 h-4"})}),e.jsx(k,{variant:"destructive",size:"sm",onClick:()=>Ne("Delete",m),children:e.jsx(Fe,{className:"w-4 h-4"})})]})}),e.jsx(O,{className:"font-medium",children:m.name}),e.jsx(O,{className:"whitespace-nowrap",children:B(m.start_date)}),e.jsx(O,{className:"whitespace-nowrap",children:B(m.end_date)}),e.jsx(O,{className:"whitespace-nowrap",children:(()=>{const T=q(m.status_lisensi),ke=T.icon;return e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${T.color}`,children:[e.jsx(ke,{className:"w-4 h-4 mr-1"}),T.text]})})()}),e.jsx(O,{className:"text-right",children:m.volume}),e.jsx(O,{children:m.satuan}),e.jsx(O,{className:"text-right whitespace-nowrap",children:K(m.harga_satuan)}),e.jsx(O,{className:"text-right whitespace-nowrap",children:K(m.jumlah)})]}),Ce[N]&&e.jsx(ie,{className:"bg-muted/5",children:e.jsx(O,{colSpan:9,className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Akses"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",m.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:Y[N]?m.password:"•".repeat(8)}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>ne(N),className:"h-6 w-6 p-0",children:Y[N]?e.jsx(pn,{className:"h-4 w-4"}):e.jsx(hn,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",m.lokasi_lisensi]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Tambahan"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1",children:m.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Pengguna Terakhir:"})," ",m.last_user_input]})]})]})]})})})]},m.uuid)))})]})}),!d&&o.length>0&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(m=>Math.max(1,m-1)),disabled:v===1,children:e.jsx(on,{className:"w-4 h-4"})}),ys(v,P).map((m,N)=>e.jsx(k,{variant:v===m?"default":"outline",size:"sm",onClick:()=>typeof m=="number"&&j(m),disabled:m==="...",children:m},N)),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>j(m=>Math.min(P,m+1)),disabled:v===P,children:e.jsx(tt,{className:"w-4 h-4"})})]})]})},Po=({onLogout:t})=>{const s=r.useRef(null),a=()=>{var n;(n=s.current)==null||n.refreshData()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Un,{onLogout:t}),e.jsx("main",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"Dashboard Monitoring Lisensi"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Pantau status dan kelola lisensi aset"})]}),e.jsx(Kn,{ref:s}),e.jsx(jo,{onDataChange:a})]})})]})};export{Po as default};
