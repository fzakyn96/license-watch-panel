import{i as z,a as e,k as Is,l as Ls,r as i,u as Pe,D as W,m as We,n as X,o as ie,p as ne,q as le,B as n,L as R,I as Z,S as Se,t as Te,v as Ee,w as De,x as F,T as ze,y as $e,z as $,E as g,F as Be,G as m,H as Xe,J as Ze,K as Ye,M as Qe,N as es,O as ss,P as as,Q as ts,R as is,U as _,e as P,j as Os,V as Fs,W as zs,X as ns,Y as ls,Z as Le,_ as rs,$ as fe,a0 as Ce,a1 as $s,a2 as Bs,a3 as cs,a4 as Us,a5 as Rs}from"./index-BM-DjNfx.js";import{A as ds,a as os,b as ms,D as Oe,S as hs,H as Fe,u as K,w as xs}from"./xlsx-uSm1xzAn.js";import{C as us}from"./chevron-left-DMUWzYzV.js";import{E as ps,a as js}from"./eye-L08K0ZNi.js";import{C as Vs}from"./circle-check-Dh45K82x.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=z("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=z("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ys=Ls("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ws({className:v,variant:u,...p}){return e.jsx("div",{className:Is(Ys({variant:u}),v),...p})}const Qs=({children:v})=>{const[u,p]=i.useState(!1),[A,C]=i.useState(!1),[Y,H]=i.useState(!1),[E,M]=i.useState([]),[S,b]=i.useState(!1),[N,D]=i.useState(null),[c,d]=i.useState({name:"",email:"",email_type:"to"}),{toast:o}=Pe(),I=async()=>{try{b(!0);const j=await(await _(`${P}/email/get`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();j.status===200?(M(j.data),(!j.data||j.data.length===0)&&o({title:"Info",description:"Tidak ada penerima email ditemukan",variant:"warning"})):j.status===404?(M([]),o({title:"Info",description:"Belum ada data penerima email",variant:"warning"})):(M([]),o({title:"Error",description:j.data||"Gagal memuat data penerima email",variant:"destructive"}))}catch(t){o({title:"Error",description:"Gagal memuat data penerima email: "+(t instanceof Error?t.message:"Unknown error"),variant:"destructive"})}finally{b(!1)}};i.useEffect(()=>{u&&I()},[u]);const Q=async()=>{if(!c.name||!c.email||!c.email_type){o({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const j=await(await _(`${P}/email/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();j.status===201?(o({title:"Berhasil",description:"Penerima email berhasil ditambahkan",variant:"success"}),d({name:"",email:"",email_type:"to"}),C(!1),I()):o({title:"Error",description:j.data||"Gagal menambahkan penerima email",variant:"destructive"})}catch{o({title:"Error",description:"Terjadi kesalahan saat menambahkan penerima email",variant:"destructive"})}},ee=async()=>{if(!N||!c.name||!c.email||!c.email_type){o({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const j=await(await _(`${P}/email/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:N.uuid,...c})})).json();j.status===200?(o({title:"Berhasil",description:"Penerima email berhasil diperbarui",variant:"success"}),d({name:"",email:"",email_type:"to"}),D(null),H(!1),I()):o({title:"Error",description:j.data||"Gagal memperbarui penerima email",variant:"destructive"})}catch(t){console.error("Error updating email recipient:",t),o({title:"Error",description:"Terjadi kesalahan saat memperbarui penerima email",variant:"destructive"})}},re=async t=>{try{const j=await _(`${P}/email/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:t})});if(j.status===204)o({title:"Berhasil",description:"Penerima email berhasil dihapus",variant:"success"}),I();else{let l="Gagal menghapus penerima email";try{l=(await j.json()).data||l}catch{}o({title:"Error",description:l,variant:"destructive"})}}catch(j){console.error("Error deleting email recipient:",j),o({title:"Error",description:"Terjadi kesalahan saat menghapus penerima email",variant:"destructive"})}},ce=t=>{D(t),d({name:t.name,email:t.email,email_type:t.email_type}),H(!0)},de=t=>{switch(t){case"to":return"bg-success text-primary-foreground";case"cc":return"bg-warning text-secondary-foreground";case"bcc":return"bg-primary text-muted-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{open:u,onOpenChange:p,children:[e.jsx(We,{asChild:!0,children:v}),e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsxs(ie,{className:"shrink-0",children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5"}),"Kelola Penerima Email"]}),e.jsx(le,{className:"text-left",children:"Kelola daftar penerima email untuk notifikasi sistem"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto min-h-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(W,{open:A,onOpenChange:C,children:[e.jsx(We,{asChild:!0,children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{className:"sm:hidden",children:"Tambah"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Penerima"})]})}),e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Tambah Penerima Email"}),e.jsx(le,{className:"text-left",children:"Tambahkan penerima email baru untuk notifikasi"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"name",children:"Nama"}),e.jsx(Z,{id:"name",value:c.name,onChange:t=>d({...c,name:t.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"email",children:"Email"}),e.jsx(Z,{id:"email",type:"email",value:c.email,onChange:t=>d({...c,email:t.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"email_type",children:"Tipe Email"}),e.jsxs(Se,{value:c.email_type,onValueChange:t=>d({...c,email_type:t}),children:[e.jsx(Te,{children:e.jsx(Ee,{placeholder:"Pilih tipe email"})}),e.jsxs(De,{children:[e.jsx(F,{value:"to",children:"To (Penerima Utama)"}),e.jsx(F,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(F,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(n,{variant:"destructive",onClick:()=>C(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(n,{variant:"default",onClick:Q,className:"w-full sm:w-auto",children:"Tambah"})]})]})]})]})}),e.jsx("div",{className:"hidden md:block overflow-y-auto max-h-[50vh]",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(ze,{children:[e.jsx($e,{children:e.jsxs($,{className:"border-b",children:[e.jsx(g,{className:"font-semibold",children:"Nama"}),e.jsx(g,{className:"font-semibold",children:"Email"}),e.jsx(g,{className:"font-semibold",children:"Tipe"}),e.jsx(g,{className:"text-right font-semibold",children:"Aksi"})]})}),e.jsx(Be,{children:S?e.jsx($,{children:e.jsx(m,{colSpan:4,className:"text-center py-8",children:"Memuat data..."})}):E.length===0?e.jsx($,{children:e.jsx(m,{colSpan:4,className:"text-center py-8",children:"Belum ada penerima email"})}):E.map(t=>e.jsxs($,{className:"border-b last:border-b-0",children:[e.jsx(m,{className:"font-medium",children:t.name}),e.jsx(m,{children:t.email}),e.jsx(m,{children:e.jsx(ws,{className:de(t.email_type),children:t.email_type.toUpperCase()})}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"default",size:"sm",onClick:()=>ce(t),children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsxs(Xe,{children:[e.jsx(Ze,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(es,{className:"text-center",children:"Hapus Penerima Email"}),e.jsxs(ss,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',t.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(as,{children:[e.jsx(ts,{children:"Batal"}),e.jsx(is,{onClick:()=>re(t.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})})]},t.uuid))})]})})}),e.jsx("div",{className:"md:hidden space-y-3 overflow-y-auto max-h-[50vh]",children:S?e.jsx("div",{className:"text-center py-8",children:"Memuat data..."}):E.length===0?e.jsx("div",{className:"text-center py-8",children:"Belum ada penerima email"}):E.map(t=>e.jsx("div",{className:"border rounded-lg p-4 bg-card",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate mt-1",children:t.email}),e.jsx(ws,{className:`${de(t.email_type)} mt-2`,children:t.email_type.toUpperCase()})]})}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(n,{size:"sm",variant:"default",onClick:()=>ce(t),className:"flex-1",children:[e.jsx(_e,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(Xe,{children:[e.jsx(Ze,{asChild:!0,children:e.jsxs(n,{size:"sm",variant:"destructive",className:"flex-1",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Hapus"]})}),e.jsxs(Ye,{children:[e.jsxs(Qe,{children:[e.jsx(es,{children:"Hapus Penerima Email"}),e.jsxs(ss,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',t.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(as,{children:[e.jsx(ts,{children:"Batal"}),e.jsx(is,{onClick:()=>re(t.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})]})},t.uuid))})]})]})]}),e.jsx(W,{open:Y,onOpenChange:H,children:e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Edit Penerima Email"}),e.jsx(le,{children:"Ubah informasi penerima email yang sudah ada"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"edit-name",children:"Nama"}),e.jsx(Z,{id:"edit-name",value:c.name,onChange:t=>d({...c,name:t.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"edit-email",children:"Email"}),e.jsx(Z,{id:"edit-email",type:"email",value:c.email,onChange:t=>d({...c,email:t.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"edit-email_type",children:"Tipe Email"}),e.jsxs(Se,{value:c.email_type,onValueChange:t=>d({...c,email_type:t}),children:[e.jsx(Te,{children:e.jsx(Ee,{placeholder:"Pilih tipe email"})}),e.jsxs(De,{children:[e.jsx(F,{value:"to",children:"To (Penerima Utama)"}),e.jsx(F,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(F,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(n,{variant:"destructive",onClick:()=>H(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(n,{variant:"default",onClick:ee,className:"w-full sm:w-auto",children:"Simpan"})]})]})]})})]})},ea=({open:v,onOpenChange:u,onSuccess:p})=>{const[A,C]=i.useState(!1),[Y,H]=i.useState(null),[E,M]=i.useState(!1),[S,b]=i.useState([]),[N,D]=i.useState(["09:00"]),{toast:c}=Pe(),d=[{value:"1",label:"Senin"},{value:"2",label:"Selasa"},{value:"3",label:"Rabu"},{value:"4",label:"Kamis"},{value:"5",label:"Jumat"},{value:"6",label:"Sabtu"},{value:"0",label:"Minggu"}];i.useEffect(()=>{v&&o()},[v]);const o=async()=>{try{const h=await(await _(`${P}/cron/running`)).json();h.status===200&&h.data&&h.data.length>0?(H(h.data[0]),M(!0),I(h.data[0].time_schedule)):(M(!1),b(["1","2","3","4","5"]),D(["09:00","15:00"]))}catch(l){console.error("Error checking existing schedule:",l),M(!1),b(["1","2","3","4","5"]),D(["09:00","15:00"])}},I=l=>{const h=l.split(" ");if(h.length===5){const[f,V,,,B]=h,oe=V.split(",").map(se=>`${se.padStart(2,"0")}:${f.padStart(2,"0")}`);if(D(oe),B.includes("-")){const[se,pe]=B.split("-").map(Number),U=[];for(let G=se;G<=pe;G++)U.push(G.toString());b(U)}else B.includes(",")?b(B.split(",")):b([B])}},Q=()=>{var B;const l=[...new Set(N.map(L=>L.split(":")[0]))],h=((B=N[0])==null?void 0:B.split(":")[1])||"00",f=l.join(","),V=S.sort((L,oe)=>Number(L)-Number(oe)).join(",");return`${h} ${f} * * ${V}`},ee=async()=>{if(S.length===0||N.length===0){c({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}C(!0);try{const l=Q();if((await _(`${P}/cron/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"sendEmail",time_schedule:l,is_running:!0})})).ok)c({title:"Notifikasi berhasil disimpan dan diaktifkan",description:"Notifikasi telah dijadwalkan sesuai pengaturan",variant:"success"}),p(),u(!1);else throw new Error("Failed to save schedule")}catch(l){console.error("Error saving schedule:",l),c({title:"Error",description:"Gagal menyimpan penjadwalan",variant:"destructive"})}finally{C(!1)}},re=async()=>{if(S.length===0||N.length===0){c({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}C(!0);try{const l=Q();if((await _(`${P}/cron/update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:Y.uuid,time_schedule:l,is_running:!0})})).ok)c({title:"Notifikasi berhasil diperbarui dan diaktifkan",description:"Notifikasi telah dijadwalkan ulang sesuai pengaturan",variant:"success"}),p(),u(!1);else throw new Error("Failed to update schedule")}catch(l){console.error("Error updating schedule:",l),c({title:"Error",description:"Gagal memperbarui penjadwalan",variant:"destructive"})}finally{C(!1)}},ce=()=>{D([...N,"09:00"])},de=l=>{N.length>1&&D(N.filter((h,f)=>f!==l))},t=(l,h)=>{const f=[...N];f[l]=h,D(f)},j=l=>{S.includes(l)?b(S.filter(h=>h!==l)):b([...S,l])};return e.jsx(W,{open:v,onOpenChange:u,children:e.jsxs(X,{className:"sm:max-w-md h-full max-h-[85vh] overflow-y-auto",children:[e.jsxs(ie,{className:"shrink-0",children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"w-5 h-5"}),"Pengaturan Penjadwalan Notifikasi"]}),e.jsx(le,{className:"text-left",children:"Notifikasi lisensi akan dikirim 1 kali pada 6 bulan, 3 bulan, 1 bulan, dan tepat saat lisensi kadaluarsa. Jika lisensi sudah kadaluarsa lebih dari 1 hari, notifikasi akan dikirim seminggu sekali hanya di hari kerja. Pengaturan dibawah ini berfungsi untuk melakukan pengecekan lisensi dan waktu pengiriman notifikasi."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium",children:"Hari"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:d.map(l=>e.jsx(n,{type:"button",variant:S.includes(l.value)?"default":"outline",size:"sm",onClick:()=>j(l.value),className:"text-xs",children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium",children:"Waktu"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[N.map((l,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{type:"time",value:l,onChange:f=>t(h,f.target.value),className:"flex-1"}),N.length>1&&e.jsx(n,{type:"button",variant:"destructive",size:"sm",onClick:()=>de(h),children:e.jsx(ge,{className:"w-4 h-4"})})]},h)),e.jsxs(n,{type:"button",variant:"warning",size:"sm",onClick:ce,className:"w-full",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Tambah Waktu"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(n,{variant:"destructive",onClick:()=>u(!1),className:"flex-1",children:"Batal"}),E?e.jsx(n,{onClick:re,disabled:A,className:"flex-1",children:A?"Memperbarui...":"Perbarui & Aktifkan"}):e.jsx(n,{onClick:ee,disabled:A,className:"flex-1",children:A?"Menyimpan...":"Simpan & Aktifkan"})]})]})]})})},sa=({onLogout:v})=>{const[u,p]=i.useState(!1),[A,C]=i.useState(!1),[Y,H]=i.useState(!1),{toast:E}=Pe(),{theme:M,setTheme:S}=Os();i.useEffect(()=>{C(window.self!==window.top)},[]),i.useEffect(()=>{b()},[]);const b=async()=>{try{const d=await(await _(`${P}/cron/running`)).json();d.status===404&&(p(!1),E({title:"Penjadwalan notifikasi belum tersedia",description:"Aktifkan notifikasi untuk membuat jadwal pengiriman notifikasi",variant:"destructive"})),d.status===200&&d.data[0].is_running===!0&&p(!0),d.status===200&&d.data[0].is_running===!1&&p(!1)}catch(c){console.error("Error checking notification status:",c)}},N=async c=>{if(c)H(!0);else try{p(!1);const o=await(await _(`${P}/cron/running`)).json();if(o.status===200&&o.data&&o.data.length>0){const I=o.data[0].uuid;(await _(`${P}/cron/switch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:I,is_running:!1})})).status===200&&(p(!1),E({title:"Notifikasi dinonaktifkan",description:"Notifikasi telah dinonaktifkan",variant:"destructive"}))}}catch(d){console.error("Error disabling notification:",d),E({title:"Error",description:"Terjadi kesalahan saat menonaktifkan notifikasi",variant:"destructive"})}},D=()=>{p(!0),b()};return e.jsxs("header",{className:"bg-card border-b border-border shadow-sm sticky top-0 z-10",children:[e.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("img",{src:M==="dark"?"/lisa/logo-dark.png":"/lisa/logo-white.png",alt:"Lisensi Aset Logo",className:"h-8 w-auto sm:h-8 object-contain"}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-foreground",children:"Lisensi Aset"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sistem Monitoring Lisensi Aset"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx(Qs,{children:e.jsxs(n,{variant:"default",size:"sm",className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(vs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Email"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Gs,{className:`w-4 h-4 sm:w-5 sm:h-5 ${u?"text-primary":"text-muted-foreground"}`}),e.jsx(Fs,{checked:u,onCheckedChange:N,"aria-label":"Toggle notifications",className:"scale-75 sm:scale-100"}),e.jsx("span",{className:"hidden sm:inline text-sm text-muted-foreground",children:u?"Aktif":"Nonaktif"})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>S(M==="dark"?"light":"dark"),className:"px-2 sm:px-3 py-1 sm:py-2",children:M==="dark"?e.jsx(Xs,{className:"w-4 h-4"}):e.jsx(Ws,{className:"w-4 h-4"})}),!A&&e.jsxs(n,{variant:"destructive",size:"sm",onClick:v,className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(Ks,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),e.jsx(ea,{open:Y,onOpenChange:H,onSuccess:D})]})},aa=({onDataChange:v})=>{const u=zs(),[p,A]=i.useState(""),[C,Y]=i.useState([]),[H,E]=i.useState(!0),[M,S]=i.useState(!1),[b,N]=i.useState(null),[D,c]=i.useState(!1),[d,o]=i.useState(1),[I,Q]=i.useState("10"),[ee,re]=i.useState(1),[ce,de]=i.useState(0),[t,j]=i.useState("status_lisensi"),[l,h]=i.useState("asc"),{toast:f}=Pe(),[V,B]=i.useState(""),[L,oe]=i.useState(""),[se,pe]=i.useState("asc"),[U,G]=i.useState(1),[me,Re]=i.useState(5),Ns=async(s=1,a=10,r,O,k)=>{try{let x=`${P}/licenses/get?page=${s}&paginate=${a}&name=${r?encodeURIComponent(r):""}`;const xe=O||"status_lisensi",Me=(k||"asc").toUpperCase();x+=`&sortField=${xe}&sortOrder=${Me}`;const ue=await(await _(x)).json();return ue.status===200?(Y(ue.data.docs),re(ue.data.pages),de(ue.data.total),ue.data.docs):[]}catch{return f({title:"Error",description:"Terjadi kesalahan saat memuat data lisensi",variant:"destructive"}),[]}},we=i.useCallback(async s=>{E(!0);try{await Ns(d,parseInt(I),s,t,l)}catch(a){console.error("Error fetching data:",a)}finally{E(!1)}},[d,I,t,l]);i.useEffect(()=>{if(p){const s=setTimeout(()=>{we(p),o(1)},500);return()=>clearTimeout(s)}else we()},[d,I,p,t,l]);const[ve,ys]=i.useState({}),w=s=>{const a={day:"2-digit",month:"long",year:"numeric"};return new Date(s).toLocaleDateString("id-ID",a)},Ne=s=>{switch(s){case 1:return{text:"Sudah Kadaluarsa",color:"bg-red-100 text-red-700 border-red-200",icon:Us};case 2:return{text:"Akan Kadaluarsa",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:cs};case 3:return{text:"Aman",color:"bg-green-100 text-green-700 border-green-200",icon:Vs};default:return{text:"Unknown",color:"bg-gray-100 text-gray-700 border-gray-200",icon:cs}}},Ve=s=>{ys(a=>({...a,[s]:!a[s]}))},ae=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),ks=async()=>{try{E(!0);const s=`${P}/licenses/get?page=1&paginate=9999&name=`,r=await(await _(s)).json();if(r.status!==200||r.data.docs.length===0){f({title:"Info",description:"Tidak ada data yang bisa diekspor (data kosong)",variant:"warning"});return}const k=r.data.docs.map((T,be)=>({No:be+1,"Nama Aset":T.name,"Tanggal Mulai":w(T.start_date),"Tanggal Berakhir":w(T.end_date),Status:Ne(T.status_lisensi).text,Volume:T.volume,Satuan:T.satuan,"Harga Satuan":T.harga_satuan,"Total Harga":T.jumlah,Lokasi:T.lokasi_lisensi,Catatan:T.description,"Tanggal Dibuat":w(T.createdAt),"Tanggal Update":w(T.updatedAt)})),x=K.json_to_sheet(k),xe=K.book_new();K.book_append_sheet(xe,x,"Data Lisensi");const Me=[{wch:5},{wch:60},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:15},{wch:15},{wch:30},{wch:40},{wch:20},{wch:20}];x["!cols"]=Me;const Ie=K.decode_range(x["!ref"]||"A1");for(let T=Ie.s.c;T<=Ie.e.c;++T){const be=K.encode_col(T)+"1";x[be]&&(x[be].s={font:{bold:!0},fill:{fgColor:{rgb:"EFEFEF"}},alignment:{horizontal:"center"}})}const Ms=new Date().toISOString().split("T")[0];xs(xe,`Data_Lisensi_${Ms}.xlsx`),f({title:"Export berhasil",description:"Data lisensi telah diekspor ke file Excel",variant:"success"})}catch{return}finally{E(!1)}},bs=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];a&&N(a)},Cs=()=>{S(!0)},Ss=()=>{window.open("/lisa/Template_Upload_Data_Lisensi.xlsx","_blank")},[Ge,je]=i.useState(!1),[Ts,ye]=i.useState(!1),[y,Je]=i.useState(null),he=(s,a)=>{s==="Delete"?(Je(a),ye(!0)):s==="Edit"?u(`/edit/${a.uuid}`):s==="History"&&(Je(a),je(!0))},Es=async()=>{if(y)try{if((await _(`${P}/licenses/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:y.uuid})})).ok)u("/"),f({title:"Berhasil",description:"Data lisensi berhasil dihapus",variant:"success"}),ye(!1),we(p),v==null||v();else throw new Error("Gagal menghapus data")}catch{f({title:"Error",description:"Terjadi kesalahan saat menghapus data lisensi",variant:"destructive"})}},Ds=async()=>{if(!b){f({title:"Error",description:"Pilih file terlebih dahulu",variant:"destructive"});return}try{c(!0);const s=new FormData;s.append("file",b);const a=Bs("auth_name")||"";if(s.append("last_user_input",a),(await _(`${P}/licenses/upload`,{method:"POST",body:s})).ok)u("/"),f({title:"Import berhasil",description:"Data lisensi telah berhasil diimport",variant:"success"}),S(!1),N(null),we(p),v==null||v();else throw new Error("Import gagal")}catch{f({title:"Import gagal",description:"Terjadi kesalahan saat mengimport data",variant:"destructive"})}finally{c(!1)}},J=i.useCallback(s=>{o(1),t===s?h(a=>a==="asc"?"desc":"asc"):(j(s),h("asc"))},[t]),q=i.useMemo(()=>s=>t!==s?e.jsx(ds,{className:"w-4 h-4 ml-1 opacity-50"}):l==="asc"?e.jsx(os,{className:"w-4 h-4 ml-1"}):e.jsx(ms,{className:"w-4 h-4 ml-1"}),[t,l]),[ke,_s]=i.useState({}),qe=s=>{_s(a=>({...a,[s]:!a[s]}))},Ke=(s,a)=>{const r=[];r.push(1),s-2>2&&r.push("...");for(let k=Math.max(2,s-2);k<=Math.min(a-1,s+2);k++)r.push(k);return s+2<a-1&&r.push("..."),a>1&&r.push(a),r},Ae=s=>{L===s?pe(se==="asc"?"desc":"asc"):(oe(s),pe("asc")),G(1)},He=s=>L!==s?e.jsx(ds,{className:"w-4 h-4 ml-1 opacity-50"}):se==="asc"?e.jsx(os,{className:"w-4 h-4 ml-1"}):e.jsx(ms,{className:"w-4 h-4 ml-1"}),Ps=s=>{let a=s;return V&&(a=s.filter(r=>r.description.toLowerCase().includes(V.toLowerCase())||r.last_user_input.toLowerCase().includes(V.toLowerCase())||ae(r.harga_satuan).toLowerCase().includes(V.toLowerCase()))),L&&(a=[...a].sort((r,O)=>{let k=r[L],x=O[L];return L==="harga_satuan"&&(k=Number(k),x=Number(x)),(L==="tanggal"||L==="createdAt")&&(k=new Date(k).getTime(),x=new Date(x).getTime()),se==="asc"?k<x?-1:k>x?1:0:k>x?-1:k<x?1:0})),a},te=s=>{const a=Ps(s),r=(U-1)*me,O=r+me;return{items:a.slice(r,O),totalItems:a.length,totalPages:Math.ceil(a.length/me)}},As=s=>{try{const a=s.history_licenses.map((x,xe)=>({No:xe+1,"Nama Lisensi":s.name,"Harga Satuan":x.harga_satuan,"Berlaku Sejak":w(x.tanggal),Deskripsi:x.description,"Tanggal Dibuat":w(x.createdAt),"Tanggal Update":w(x.updatedAt)})),r=K.book_new(),O=K.json_to_sheet(a);K.book_append_sheet(r,O,"Riwayat Harga");const k=new Date().toISOString().split("T")[0];xs(r,`Riwayat Harga Lisensi_${s.name}_${k}.xlsx`),f({title:"Berhasil",description:"Riwayat harga berhasil diekspor ke Excel",variant:"success"})}catch{f({title:"Error",description:"Gagal mengekspor riwayat harga ke Excel",variant:"destructive"})}},Hs=()=>{B(""),oe(""),pe("asc"),G(1),Re(5)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-foreground",children:"Daftar Lisensi Aset"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(n,{onClick:()=>u("/add"),className:"flex items-center justify-center gap-2 w-full sm:w-auto",variant:"success",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Tambah Lisensi"]}),e.jsxs(n,{onClick:()=>u("/prices"),variant:"warning",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(Js,{className:"w-4 h-4"}),"Harga Lisensi"]}),e.jsxs(ns,{children:[e.jsx(ls,{asChild:!0,children:e.jsxs(n,{variant:"default",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(fs,{className:"w-4 h-4"}),"Excel",e.jsx(Le,{className:"w-4 h-4"})]})}),e.jsxs(rs,{children:[e.jsxs(fe,{onClick:Cs,children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),"Import Data"]}),e.jsxs(fe,{onClick:ks,children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Z,{placeholder:"Cari lisensi...",value:p,onChange:s=>A(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:["Total Data: ",ce," - Tampilkan:"]}),e.jsxs(Se,{value:I,onValueChange:Q,children:[e.jsx(Te,{className:"w-full sm:w-24",children:e.jsx(Ee,{})}),e.jsxs(De,{children:[e.jsx(F,{value:"10",children:"10"}),e.jsx(F,{value:"25",children:"25"}),e.jsx(F,{value:"50",children:"50"}),e.jsx(F,{value:"100",children:"100"})]})]})]})]}),e.jsx(W,{open:M,onOpenChange:S,children:e.jsxs(X,{children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Import Data Lisensi"}),e.jsx(le,{children:"Upload file Excel untuk mengimport data lisensi baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:"Template Excel"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Gunakan template yang telah disediakan untuk mengimport data"}),e.jsxs(n,{variant:"secondary",size:"sm",onClick:Ss,className:"w-full",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Download Template"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:"Upload File"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pilih file Excel yang akan diimport"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{type:"file",accept:".xlsx",onChange:bs,disabled:D}),e.jsx(n,{onClick:Ds,disabled:!b||D,className:"w-full",children:D?e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"w-4 h-4 mr-2 animate-spin"}),"Mengupload..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})]})}),e.jsx(W,{open:Ts,onOpenChange:ye,children:e.jsxs(X,{children:[e.jsxs(ie,{children:[e.jsx(ne,{children:"Konfirmasi Hapus"}),e.jsx(le,{children:"Konfirmasi penghapusan data lisensi yang dipilih"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{children:['Apakah Anda yakin ingin menghapus lisensi "',y==null?void 0:y.name,'"?']}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"default",onClick:()=>ye(!1),children:"Batal"}),e.jsx(n,{variant:"destructive",onClick:Es,children:"Hapus"})]})]})}),e.jsx(W,{open:Ge,onOpenChange:je,children:e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsx(W,{open:Ge,onOpenChange:s=>{je(s),s||Hs()},children:e.jsxs(X,{className:"w-full max-w-full sm:max-w-4xl",onOpenAutoFocus:s=>s.preventDefault(),children:[e.jsxs(ie,{children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"Riwayat Harga Lisensi"]}),e.jsxs(le,{className:"text-left",children:["Detail riwayat harga lisensi : ",y==null?void 0:y.name]})]}),y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 flex-wrap w-full",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Z,{placeholder:"Cari...",value:V,onChange:s=>B(s.target.value),className:"pl-10 w-full",tabIndex:-1})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Tampilkan:"}),e.jsxs(Se,{value:me.toString(),onValueChange:s=>Re(Number(s)),children:[e.jsx(Te,{className:"w-full sm:w-24",children:e.jsx(Ee,{})}),e.jsxs(De,{children:[e.jsx(F,{value:"5",children:"5"}),e.jsx(F,{value:"10",children:"10"}),e.jsx(F,{value:"20",children:"20"})]})]})]})]}),e.jsx("div",{className:"hidden sm:block border rounded-lg overflow-x-auto",children:e.jsxs(ze,{className:"w-full min-w-[700px] text-sm",children:[e.jsx($e,{children:e.jsxs($,{className:"bg-muted/50 border-b",children:[e.jsx(g,{className:"w-12 text-center",children:"No"}),e.jsx(g,{onClick:()=>Ae("harga_satuan"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",He("harga_satuan")]})}),e.jsx(g,{onClick:()=>Ae("tanggal"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Berlaku Sejak",He("tanggal")]})}),e.jsx(g,{children:"Deskripsi"}),e.jsx(g,{onClick:()=>Ae("createdAt"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Dibuat",He("createdAt")]})})]})}),e.jsxs(Be,{children:[te(y.history_licenses).items.map((s,a)=>e.jsxs($,{children:[e.jsx(m,{className:"text-center",children:(U-1)*me+a+1}),e.jsx(m,{children:ae(s.harga_satuan)}),e.jsx(m,{children:w(s.tanggal)}),e.jsx(m,{className:"whitespace-pre-wrap break-words max-w-[200px]",children:s.description}),e.jsx(m,{children:w(s.createdAt)})]},s.id)),te(y.history_licenses).items.length===0&&e.jsx($,{children:e.jsx(m,{colSpan:6,className:"text-center py-6 text-muted-foreground",children:"Tidak ada data riwayat"})})]})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:te(y.history_licenses).items.length>0?te(y.history_licenses).items.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsxs("span",{children:["No: ",(U-1)*me+a+1]}),e.jsxs("span",{children:["Berlaku sejak: ",w(s.tanggal)]})]}),e.jsx("div",{className:"font-medium text-sm",children:ae(s.harga_satuan)}),e.jsx("div",{className:"text-xs text-slate-400 whitespace-pre-wrap break-words mb-2",children:s.description}),e.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:e.jsxs("span",{children:["Tanggal Dibuat: ",w(s.createdAt)]})})]},s.id)):e.jsx("div",{className:"text-center py-6 text-muted-foreground text-sm",children:"Tidak ada data riwayat"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 mt-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-wrap justify-center sm:justify-start w-full sm:w-auto",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>G(s=>Math.max(1,s-1)),disabled:U===1,children:e.jsx(us,{className:"w-4 h-4"})}),Ke(U,te(y.history_licenses).totalPages).map((s,a)=>e.jsx(n,{variant:U===s?"default":"outline",size:"sm",onClick:()=>typeof s=="number"&&G(s),disabled:s==="...",children:s},a)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>G(s=>Math.min(te(y.history_licenses).totalPages,s+1)),disabled:U===te(y.history_licenses).totalPages,children:e.jsx(Ce,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[e.jsxs(n,{variant:"success",onClick:()=>y&&As(y),className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Export"]}),e.jsx(n,{variant:"destructive",onClick:()=>je(!1),className:"w-full sm:w-auto",children:"Tutup"})]})]})]})]})}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(n,{variant:"destructive",onClick:()=>je(!1),children:"Batal"})})]})}),e.jsx("div",{className:"hidden sm:block border rounded-lg overflow-x-auto",children:e.jsxs(ze,{className:"[&_tr>*]:border-r [&_tr>*:last-child]:border-r-0 [&_tr]:border-b [&_tr:last-child]:border-b-0",children:[e.jsx($e,{children:e.jsxs($,{className:"bg-muted/50 border-b",children:[e.jsx(g,{className:"w-[120px] text-center whitespace-nowrap",children:"Aksi"}),e.jsx(g,{className:"w-[200px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("name"),children:e.jsxs("div",{className:"flex items-center",children:["Nama Aset",q("name")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("start_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Mulai",q("start_date")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Berakhir",q("end_date")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Status",q("end_date")]})}),e.jsx(g,{className:"w-[80px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("volume"),children:e.jsxs("div",{className:"flex items-center",children:["Volume",q("volume")]})}),e.jsx(g,{className:"w-[100px] whitespace-nowrap",children:"Satuan"}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("harga_satuan"),children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",q("harga_satuan")]})}),e.jsx(g,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("jumlah"),children:e.jsxs("div",{className:"flex items-center",children:["Total Harga",q("jumlah")]})}),e.jsx(g,{className:"w-[130px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("createdAt"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Dibuat",q("createdAt")]})}),e.jsx(g,{className:"w-[130px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("updatedAt"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal update",q("updatedAt")]})})]})}),e.jsx(Be,{className:"[&_tr:last-child]:border-b-0",children:H?e.jsx($,{children:e.jsx(m,{colSpan:11,className:"text-center py-8",children:"Memuat data..."})}):C.length===0?e.jsx($,{children:e.jsx(m,{colSpan:11,className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"})}):C.map((s,a)=>(Ne(s.status_lisensi),e.jsxs($s.Fragment,{children:[e.jsxs($,{className:"hover:bg-muted/30",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(n,{variant:"success",size:"sm",onClick:()=>qe(a),children:ke[a]?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(n,{variant:"default",size:"sm",onClick:()=>he("History",s),children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(n,{variant:"warning",size:"sm",onClick:()=>he("Edit",s),children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx(n,{variant:"destructive",size:"sm",onClick:()=>he("Delete",s),children:e.jsx(ge,{className:"w-4 h-4"})})]})}),e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{className:"whitespace-nowrap",children:w(s.start_date)}),e.jsx(m,{className:"whitespace-nowrap",children:w(s.end_date)}),e.jsx(m,{className:"whitespace-nowrap",children:(()=>{const r=Ne(s.status_lisensi),O=r.icon;return e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.color}`,children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),r.text]})})()}),e.jsx(m,{className:"text-right",children:s.volume}),e.jsx(m,{children:s.satuan}),e.jsx(m,{className:"text-right whitespace-nowrap",children:ae(s.harga_satuan)}),e.jsx(m,{className:"text-right whitespace-nowrap",children:ae(s.jumlah)}),e.jsx(m,{className:"whitespace-nowrap text-sm",children:w(s.createdAt)}),e.jsx(m,{className:"whitespace-nowrap text-sm",children:w(s.updatedAt)})]}),ke[a]&&e.jsx($,{className:"bg-muted/5",children:e.jsx(m,{colSpan:11,className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Akses"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:ve[a]?s.password:"•".repeat(8)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Ve(a),className:"h-6 w-6 p-0",children:ve[a]?e.jsx(ps,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",s.lokasi_lisensi]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Tambahan"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1",children:s.description})]})})]})]})})})]},s.uuid)))})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:H?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Memuat data..."}):C.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"}):C.map((s,a)=>{const r=Ne(s.status_lisensi),O=r.icon;return e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.color}`,children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),r.text]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"success",size:"sm",onClick:()=>qe(a),children:ke[a]?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Ce,{className:"w-4 h-4"})}),e.jsxs(ns,{children:[e.jsx(ls,{asChild:!0,children:e.jsx(n,{variant:"default",size:"sm",children:e.jsx(fs,{className:"w-4 h-4"})})}),e.jsxs(rs,{children:[e.jsxs(fe,{onClick:()=>he("History",s),children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Riwayat"]}),e.jsxs(fe,{onClick:()=>he("Edit",s),children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(fe,{onClick:()=>he("Delete",s),children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Hapus"]})]})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Nama Lisensi:"}),e.jsx("span",{children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Mulai:"}),e.jsx("span",{children:w(s.start_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Berakhir:"}),e.jsx("span",{children:w(s.end_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Volume x Harga Satuan:"}),e.jsxs("span",{children:[s.volume," ",s.satuan," x ",ae(s.harga_satuan)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Harga:"}),e.jsx("span",{children:ae(s.jumlah)})]})]}),ke[a]&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:ve[a]?s.password:"•".repeat(8)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Ve(a),className:"sm:inline-flex",children:ve[a]?e.jsx(ps,{className:"h-4 w-4"}):e.jsx(js,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",s.lokasi_lisensi]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:s.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tanggal Dibuat"})," ",w(s.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tanggal Update:"})," ",w(s.updatedAt)]})]})})]},s.uuid)})}),!H&&C.length>0&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.max(1,s-1)),disabled:d===1,children:e.jsx(us,{className:"w-4 h-4"})}),Ke(d,ee).map((s,a)=>e.jsx(n,{variant:d===s?"default":"outline",size:"sm",onClick:()=>typeof s=="number"&&o(s),disabled:s==="...",children:s},a)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.min(ee,s+1)),disabled:d===ee,children:e.jsx(Ce,{className:"w-4 h-4"})})]})]})},ca=({onLogout:v})=>{const u=i.useRef(null),p=()=>{var A;(A=u.current)==null||A.refreshData()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(sa,{onLogout:v}),e.jsx("main",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"Dashboard Monitoring Lisensi"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Pantau status dan kelola lisensi aset"})]}),e.jsx(Rs,{ref:u}),e.jsx(aa,{onDataChange:p})]})})]})};export{ca as default};
