import{r as o,u as f,j as v,a as e,s as i,A as _,b as w,c as N,d as k}from"./index-B5yO14EG.js";import{B as D}from"./button-BLyQRZSy.js";import{C as L,a as E,b as S,c as A}from"./card-pal7MWqq.js";import{I as p}from"./input-Q8JswDB5.js";import{L as g}from"./label-gZ4NEqCJ.js";const C=({onLogin:n})=>{const[l,h]=o.useState(""),[c,x]=o.useState(""),[d,m]=o.useState(!1),{toast:u}=f(),{theme:b}=v(),y=async s=>{s.preventDefault(),m(!0);try{const a=await fetch("https://digio.pgn.co.id/lisa_backend/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l,password:c,directory:"pertamina"})});if(!a.ok){const j=await a.text();throw new Error(j||"Login gagal")}const t=await a.json(),r=Date.now()+t.expires*1e3;i(_,t.token,{expires:new Date(r),path:"/"}),i(w,t.name,{expires:new Date(r),path:"/"}),i(N,t.group,{expires:new Date(r),path:"/"}),i(k,String(r),{expires:new Date(r),path:"/"}),u({title:"Login berhasil",description:`Selamat datang, ${t.name}`,variant:"success"}),n()}catch(a){u({title:"Login gagal",description:(a==null?void 0:a.message)||"Silakan periksa kredensial Anda",variant:"destructive"})}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-secondary/10",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_50%,hsl(var(--primary)_/_20%),transparent_50%)] animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_20%,hsl(var(--secondary)_/_20%),transparent_50%)] animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_40%_80%,hsl(var(--accent)_/_10%),transparent_50%)] animate-pulse",style:{animationDelay:"2s"}})]}),e.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-primary/5 rounded-full blur-xl animate-bounce",style:{animationDuration:"3s"}}),e.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 bg-secondary/5 rounded-full blur-xl animate-bounce",style:{animationDuration:"4s",animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-32 left-32 w-20 h-20 bg-accent/5 rounded-full blur-xl animate-bounce",style:{animationDuration:"5s",animationDelay:"2s"}}),e.jsx("div",{className:"relative z-10 w-full max-w-md p-4",children:e.jsxs(L,{className:"backdrop-blur-sm bg-card/95 border border-border/50 shadow-2xl",children:[e.jsxs(E,{className:"space-y-2 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:b==="dark"?"/lisa/logo-dark.png":"/lisa/logo-white.png",alt:"Lisensi Aset Logo",className:"h-14 w-auto object-contain"})}),e.jsx("div",{children:e.jsx(S,{className:"text-muted-foreground",children:"Masuk ke sistem monitoring lisensi aset"})})]}),e.jsx(A,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"username",children:"Username"}),e.jsx(p,{id:"username",type:"text",placeholder:"username",value:l,onChange:s=>h(s.target.value),required:!0,className:"bg-background/50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"password",children:"Password"}),e.jsx(p,{id:"password",type:"password",placeholder:"••••••••",value:c,onChange:s=>x(s.target.value),required:!0,className:"bg-background/50"})]}),e.jsx(D,{type:"submit",className:"w-full mt-6 bg-primary hover:bg-primary/90 text-primary-foreground",disabled:d,children:d?"Memproses...":"Login"})]})})]})})]})},I=({onLogin:n})=>e.jsx(C,{onLogin:n});export{I as default};
