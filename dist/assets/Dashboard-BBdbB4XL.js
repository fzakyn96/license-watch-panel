import{h as F,a as e,i as Ms,k as Is,r as i,u as De,D as W,l as Ke,m as X,n as te,o as ie,p as ne,B as n,L as U,I as Z,S as Ce,q as Se,t as Te,v as _e,w as O,T as Fe,x as ze,y as z,z as f,E as $e,F as m,G as We,H as Xe,J as Ze,K as Ye,M as Qe,N as es,O as ss,P as as,Q as ts,R as D,j as Ls,U as Os,V as Fs,W as is,X as ns,Y as Ie,Z as ls,_ as je,$ as be,a0 as zs,a1 as rs,a2 as $s,a3 as Bs,a4 as Us}from"./index-gCp_f9hy.js";import{A as cs,a as ds,b as os,D as Le,S as ms,H as Oe,u as K,w as hs}from"./xlsx-CQnOxDW9.js";import{C as xs}from"./chevron-left-D9CSY1-l.js";import{E as us,a as ps}from"./eye-B10wi6Z7.js";import{C as Rs}from"./circle-check-BX8Sy9u1.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=F("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=F("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=F("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=F("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=F("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=F("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=F("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=F("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Zs=Is("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function fs({className:v,variant:u,...p}){return e.jsx("div",{className:Ms(Zs({variant:u}),v),...p})}const Ys=({children:v})=>{const[u,p]=i.useState(!1),[P,S]=i.useState(!1),[Y,A]=i.useState(!1),[_,H]=i.useState([]),[T,C]=i.useState(!1),[N,E]=i.useState(null),[c,d]=i.useState({name:"",email:"",email_type:"to"}),{toast:o}=De(),M=async()=>{try{C(!0);const j=await(await D("https://digio.pgn.co.id/lisa_backend/email/get",{method:"GET",headers:{"Content-Type":"application/json"}})).json();j.status===200?(H(j.data),(!j.data||j.data.length===0)&&o({title:"Info",description:"Tidak ada penerima email ditemukan",variant:"warning"})):j.status===404?(H([]),o({title:"Info",description:"Belum ada data penerima email",variant:"warning"})):(H([]),o({title:"Error",description:j.data||"Gagal memuat data penerima email",variant:"destructive"}))}catch(t){o({title:"Error",description:"Gagal memuat data penerima email: "+(t instanceof Error?t.message:"Unknown error"),variant:"destructive"})}finally{C(!1)}};i.useEffect(()=>{u&&M()},[u]);const R=async()=>{if(!c.name||!c.email||!c.email_type){o({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const j=await(await D("https://digio.pgn.co.id/lisa_backend/email/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();j.status===201?(o({title:"Berhasil",description:"Penerima email berhasil ditambahkan",variant:"success"}),d({name:"",email:"",email_type:"to"}),S(!1),M()):o({title:"Error",description:j.data||"Gagal menambahkan penerima email",variant:"destructive"})}catch{o({title:"Error",description:"Terjadi kesalahan saat menambahkan penerima email",variant:"destructive"})}},Q=async()=>{if(!N||!c.name||!c.email||!c.email_type){o({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}try{const j=await(await D("https://digio.pgn.co.id/lisa_backend/email/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:N.uuid,...c})})).json();j.status===200?(o({title:"Berhasil",description:"Penerima email berhasil diperbarui",variant:"success"}),d({name:"",email:"",email_type:"to"}),E(null),A(!1),M()):o({title:"Error",description:j.data||"Gagal memperbarui penerima email",variant:"destructive"})}catch(t){console.error("Error updating email recipient:",t),o({title:"Error",description:"Terjadi kesalahan saat memperbarui penerima email",variant:"destructive"})}},le=async t=>{try{const j=await D("https://digio.pgn.co.id/lisa_backend/email/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:t})});if(j.status===204)o({title:"Berhasil",description:"Penerima email berhasil dihapus",variant:"success"}),M();else{let l="Gagal menghapus penerima email";try{l=(await j.json()).data||l}catch{}o({title:"Error",description:l,variant:"destructive"})}}catch(j){console.error("Error deleting email recipient:",j),o({title:"Error",description:"Terjadi kesalahan saat menghapus penerima email",variant:"destructive"})}},re=t=>{E(t),d({name:t.name,email:t.email,email_type:t.email_type}),A(!0)},ce=t=>{switch(t){case"to":return"bg-success text-primary-foreground";case"cc":return"bg-warning text-secondary-foreground";case"bcc":return"bg-primary text-muted-foreground";default:return"bg-muted text-muted-foreground"}};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{open:u,onOpenChange:p,children:[e.jsx(Ke,{asChild:!0,children:v}),e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsxs(te,{className:"shrink-0",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5"}),"Kelola Penerima Email"]}),e.jsx(ne,{className:"text-left",children:"Kelola daftar penerima email untuk notifikasi sistem"})]}),e.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto min-h-0",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(W,{open:P,onOpenChange:S,children:[e.jsx(Ke,{asChild:!0,children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{className:"sm:hidden",children:"Tambah"}),e.jsx("span",{className:"hidden sm:inline",children:"Tambah Penerima"})]})}),e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Tambah Penerima Email"}),e.jsx(ne,{className:"text-left",children:"Tambahkan penerima email baru untuk notifikasi"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Nama"}),e.jsx(Z,{id:"name",value:c.name,onChange:t=>d({...c,name:t.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(Z,{id:"email",type:"email",value:c.email,onChange:t=>d({...c,email:t.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email_type",children:"Tipe Email"}),e.jsxs(Ce,{value:c.email_type,onValueChange:t=>d({...c,email_type:t}),children:[e.jsx(Se,{children:e.jsx(Te,{placeholder:"Pilih tipe email"})}),e.jsxs(_e,{children:[e.jsx(O,{value:"to",children:"To (Penerima Utama)"}),e.jsx(O,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(O,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(n,{variant:"destructive",onClick:()=>S(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(n,{variant:"default",onClick:R,className:"w-full sm:w-auto",children:"Tambah"})]})]})]})]})}),e.jsx("div",{className:"hidden md:block overflow-y-auto max-h-[50vh]",children:e.jsx("div",{className:"border rounded-lg",children:e.jsxs(Fe,{children:[e.jsx(ze,{children:e.jsxs(z,{className:"border-b",children:[e.jsx(f,{className:"font-semibold",children:"Nama"}),e.jsx(f,{className:"font-semibold",children:"Email"}),e.jsx(f,{className:"font-semibold",children:"Tipe"}),e.jsx(f,{className:"text-right font-semibold",children:"Aksi"})]})}),e.jsx($e,{children:T?e.jsx(z,{children:e.jsx(m,{colSpan:4,className:"text-center py-8",children:"Memuat data..."})}):_.length===0?e.jsx(z,{children:e.jsx(m,{colSpan:4,className:"text-center py-8",children:"Belum ada penerima email"})}):_.map(t=>e.jsxs(z,{className:"border-b last:border-b-0",children:[e.jsx(m,{className:"font-medium",children:t.name}),e.jsx(m,{children:t.email}),e.jsx(m,{children:e.jsx(fs,{className:ce(t.email_type),children:t.email_type.toUpperCase()})}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"default",size:"sm",onClick:()=>re(t),children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsxs(We,{children:[e.jsx(Xe,{asChild:!0,children:e.jsx(n,{variant:"destructive",size:"sm",children:e.jsx(ge,{className:"w-4 h-4"})})}),e.jsxs(Ze,{children:[e.jsxs(Ye,{children:[e.jsx(Qe,{className:"text-center",children:"Hapus Penerima Email"}),e.jsxs(es,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',t.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(ss,{children:[e.jsx(as,{children:"Batal"}),e.jsx(ts,{onClick:()=>le(t.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})})]},t.uuid))})]})})}),e.jsx("div",{className:"md:hidden space-y-3 overflow-y-auto max-h-[50vh]",children:T?e.jsx("div",{className:"text-center py-8",children:"Memuat data..."}):_.length===0?e.jsx("div",{className:"text-center py-8",children:"Belum ada penerima email"}):_.map(t=>e.jsx("div",{className:"border rounded-lg p-4 bg-card",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground truncate mt-1",children:t.email}),e.jsx(fs,{className:`${ce(t.email_type)} mt-2`,children:t.email_type.toUpperCase()})]})}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(n,{size:"sm",variant:"default",onClick:()=>re(t),className:"flex-1",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs(We,{children:[e.jsx(Xe,{asChild:!0,children:e.jsxs(n,{size:"sm",variant:"destructive",className:"flex-1",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),"Hapus"]})}),e.jsxs(Ze,{children:[e.jsxs(Ye,{children:[e.jsx(Qe,{children:"Hapus Penerima Email"}),e.jsxs(es,{className:"text-center",children:['Apakah Anda yakin ingin menghapus penerima email "',t.name,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(ss,{children:[e.jsx(as,{children:"Batal"}),e.jsx(ts,{onClick:()=>le(t.uuid),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Hapus"})]})]})]})]})]})},t.uuid))})]})]})]}),e.jsx(W,{open:Y,onOpenChange:A,children:e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-md max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Edit Penerima Email"}),e.jsx(ne,{children:"Ubah informasi penerima email yang sudah ada"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-name",children:"Nama"}),e.jsx(Z,{id:"edit-name",value:c.name,onChange:t=>d({...c,name:t.target.value}),placeholder:"Masukkan nama penerima"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-email",children:"Email"}),e.jsx(Z,{id:"edit-email",type:"email",value:c.email,onChange:t=>d({...c,email:t.target.value}),placeholder:"Masukkan alamat email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-email_type",children:"Tipe Email"}),e.jsxs(Ce,{value:c.email_type,onValueChange:t=>d({...c,email_type:t}),children:[e.jsx(Se,{children:e.jsx(Te,{placeholder:"Pilih tipe email"})}),e.jsxs(_e,{children:[e.jsx(O,{value:"to",children:"To (Penerima Utama)"}),e.jsx(O,{value:"cc",children:"CC (Carbon Copy)"}),e.jsx(O,{value:"bcc",children:"BCC (Blind Carbon Copy)"})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-2",children:[e.jsx(n,{variant:"destructive",onClick:()=>A(!1),className:"w-full sm:w-auto",children:"Batal"}),e.jsx(n,{variant:"default",onClick:Q,className:"w-full sm:w-auto",children:"Simpan"})]})]})]})})]})},Qs=({open:v,onOpenChange:u,onSuccess:p})=>{const[P,S]=i.useState(!1),[Y,A]=i.useState(null),[_,H]=i.useState(!1),[T,C]=i.useState([]),[N,E]=i.useState(["09:00"]),{toast:c}=De(),d=[{value:"1",label:"Senin"},{value:"2",label:"Selasa"},{value:"3",label:"Rabu"},{value:"4",label:"Kamis"},{value:"5",label:"Jumat"},{value:"6",label:"Sabtu"},{value:"0",label:"Minggu"}];i.useEffect(()=>{v&&o()},[v]);const o=async()=>{try{const h=await(await D("https://digio.pgn.co.id/lisa_backend/cron/running")).json();h.status===200&&h.data&&h.data.length>0?(A(h.data[0]),H(!0),M(h.data[0].time_schedule)):(H(!1),C(["1","2","3","4","5"]),E(["09:00","15:00"]))}catch(l){console.error("Error checking existing schedule:",l),H(!1),C(["1","2","3","4","5"]),E(["09:00","15:00"])}},M=l=>{const h=l.split(" ");if(h.length===5){const[g,V,,,$]=h,de=V.split(",").map(ee=>`${ee.padStart(2,"0")}:${g.padStart(2,"0")}`);if(E(de),$.includes("-")){const[ee,ue]=$.split("-").map(Number),B=[];for(let G=ee;G<=ue;G++)B.push(G.toString());C(B)}else $.includes(",")?C($.split(",")):C([$])}},R=()=>{var $;const l=[...new Set(N.map(I=>I.split(":")[0]))],h=(($=N[0])==null?void 0:$.split(":")[1])||"00",g=l.join(","),V=T.sort((I,de)=>Number(I)-Number(de)).join(",");return`${h} ${g} * * ${V}`},Q=async()=>{if(T.length===0||N.length===0){c({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}S(!0);try{const l=R();if((await D("https://digio.pgn.co.id/lisa_backend/cron/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:"sendEmail",time_schedule:l,is_running:!0})})).ok)c({title:"Notifikasi berhasil disimpan dan diaktifkan",description:"Notifikasi telah dijadwalkan sesuai pengaturan",variant:"success"}),p(),u(!1);else throw new Error("Failed to save schedule")}catch(l){console.error("Error saving schedule:",l),c({title:"Error",description:"Gagal menyimpan penjadwalan",variant:"destructive"})}finally{S(!1)}},le=async()=>{if(T.length===0||N.length===0){c({title:"Error",description:"Pilih minimal satu hari dan satu waktu",variant:"destructive"});return}S(!0);try{const l=R();if((await D("https://digio.pgn.co.id/lisa_backend/cron/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:Y.uuid,time_schedule:l,is_running:!0})})).ok)c({title:"Notifikasi berhasil diperbarui dan diaktifkan",description:"Notifikasi telah dijadwalkan ulang sesuai pengaturan",variant:"success"}),p(),u(!1);else throw new Error("Failed to update schedule")}catch(l){console.error("Error updating schedule:",l),c({title:"Error",description:"Gagal memperbarui penjadwalan",variant:"destructive"})}finally{S(!1)}},re=()=>{E([...N,"09:00"])},ce=l=>{N.length>1&&E(N.filter((h,g)=>g!==l))},t=(l,h)=>{const g=[...N];g[l]=h,E(g)},j=l=>{T.includes(l)?C(T.filter(h=>h!==l)):C([...T,l])};return e.jsx(W,{open:v,onOpenChange:u,children:e.jsxs(X,{className:"sm:max-w-md h-full max-h-[85vh] overflow-y-auto",children:[e.jsxs(te,{className:"shrink-0",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"w-5 h-5"}),"Pengaturan Penjadwalan Notifikasi"]}),e.jsx(ne,{className:"text-left",children:"Notifikasi lisensi akan dikirim 1 kali pada 6 bulan, 3 bulan, 1 bulan, dan tepat saat lisensi kadaluarsa. Jika lisensi sudah kadaluarsa lebih dari 1 hari, notifikasi akan dikirim seminggu sekali hanya di hari kerja. Pengaturan dibawah ini berfungsi untuk melakukan pengecekan lisensi dan waktu pengiriman notifikasi."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Hari"}),e.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:d.map(l=>e.jsx(n,{type:"button",variant:T.includes(l.value)?"default":"outline",size:"sm",onClick:()=>j(l.value),className:"text-xs",children:l.label},l.value))})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Waktu"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[N.map((l,h)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{type:"time",value:l,onChange:g=>t(h,g.target.value),className:"flex-1"}),N.length>1&&e.jsx(n,{type:"button",variant:"destructive",size:"sm",onClick:()=>ce(h),children:e.jsx(ge,{className:"w-4 h-4"})})]},h)),e.jsxs(n,{type:"button",variant:"warning",size:"sm",onClick:re,className:"w-full",children:[e.jsx(Be,{className:"w-4 h-4"}),"Tambah Waktu"]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(n,{variant:"destructive",onClick:()=>u(!1),className:"flex-1",children:"Batal"}),_?e.jsx(n,{onClick:le,disabled:P,className:"flex-1",children:P?"Memperbarui...":"Perbarui & Aktifkan"}):e.jsx(n,{onClick:Q,disabled:P,className:"flex-1",children:P?"Menyimpan...":"Simpan & Aktifkan"})]})]})]})})},ea=({onLogout:v})=>{const[u,p]=i.useState(!1),[P,S]=i.useState(!1),[Y,A]=i.useState(!1),{toast:_}=De(),{theme:H,setTheme:T}=Ls();i.useEffect(()=>{S(window.self!==window.top)},[]),i.useEffect(()=>{C()},[]);const C=async()=>{try{const d=await(await D("https://digio.pgn.co.id/lisa_backend/cron/running")).json();d.status===404&&(p(!1),_({title:"Penjadwalan notifikasi belum tersedia",description:"Aktifkan notifikasi untuk membuat jadwal pengiriman notifikasi",variant:"destructive"})),d.status===200&&d.data[0].is_running===!0&&p(!0),d.status===200&&d.data[0].is_running===!1&&p(!1)}catch(c){console.error("Error checking notification status:",c)}},N=async c=>{if(c)A(!0);else try{p(!1);const o=await(await D("https://digio.pgn.co.id/lisa_backend/cron/running")).json();if(o.status===200&&o.data&&o.data.length>0){const M=o.data[0].uuid,R=await D("https://digio.pgn.co.id/lisa_backend/cron/switch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:M,is_running:!1})});(R.ok||R.status===200)&&(p(!1),_({title:"Notifikasi dinonaktifkan",description:"Notifikasi telah dinonaktifkan",variant:"destructive"}))}}catch(d){console.error("Error disabling notification:",d),_({title:"Error",description:"Terjadi kesalahan saat menonaktifkan notifikasi",variant:"destructive"})}},E=()=>{p(!0),C()};return e.jsxs("header",{className:"bg-card border-b border-border shadow-sm sticky top-0 z-10",children:[e.jsx("div",{className:"mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx("img",{src:H==="dark"?"/lisa/logo-dark.png":"/lisa/logo-white.png",alt:"Lisensi Aset Logo",className:"h-8 w-auto sm:h-8 object-contain"}),e.jsxs("div",{className:"hidden lg:block",children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold text-foreground",children:"Lisensi Aset"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Sistem Monitoring Lisensi Aset"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx(Ys,{children:e.jsxs(n,{variant:"default",size:"sm",className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(ws,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Email"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsx(Vs,{className:`w-4 h-4 sm:w-5 sm:h-5 ${u?"text-primary":"text-muted-foreground"}`}),e.jsx(Os,{checked:u,onCheckedChange:N,"aria-label":"Toggle notifications",className:"scale-75 sm:scale-100"}),e.jsx("span",{className:"hidden sm:inline text-sm text-muted-foreground",children:u?"Aktif":"Nonaktif"})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>T(H==="dark"?"light":"dark"),className:"px-2 sm:px-3 py-1 sm:py-2",children:H==="dark"?e.jsx(Ws,{className:"w-4 h-4"}):e.jsx(Ks,{className:"w-4 h-4"})}),!P&&e.jsxs(n,{variant:"destructive",size:"sm",onClick:v,className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(qs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})}),e.jsx(Qs,{open:Y,onOpenChange:A,onSuccess:E})]})},sa=({onDataChange:v})=>{const u=Fs(),[p,P]=i.useState(""),[S,Y]=i.useState([]),[A,_]=i.useState(!0),[H,T]=i.useState(!1),[C,N]=i.useState(null),[E,c]=i.useState(!1),[d,o]=i.useState(1),[M,R]=i.useState("10"),[Q,le]=i.useState(1),[re,ce]=i.useState(0),[t,j]=i.useState("status_lisensi"),[l,h]=i.useState("asc"),{toast:g}=De(),[V,$]=i.useState(""),[I,de]=i.useState(""),[ee,ue]=i.useState("asc"),[B,G]=i.useState(1),[oe,Ue]=i.useState(5),vs=async(s=1,a=10,r,L,k)=>{try{let x=`https://digio.pgn.co.id/lisa_backend/licenses/get?page=${s}&paginate=${a}&name=${r?encodeURIComponent(r):""}`;const he=L||"status_lisensi",He=(k||"asc").toUpperCase();x+=`&sortField=${he}&sortOrder=${He}`;const xe=await(await D(x)).json();return xe.status===200?(Y(xe.data.docs),le(xe.data.pages),ce(xe.data.total),xe.data.docs):[]}catch{return g({title:"Error",description:"Terjadi kesalahan saat memuat data lisensi",variant:"destructive"}),[]}},fe=i.useCallback(async s=>{_(!0);try{await vs(d,parseInt(M),s,t,l)}catch(a){console.error("Error fetching data:",a)}finally{_(!1)}},[d,M,t,l]);i.useEffect(()=>{if(p){const s=setTimeout(()=>{fe(p),o(1)},500);return()=>clearTimeout(s)}else fe()},[d,M,p,t,l]);const[we,Ns]=i.useState({}),w=s=>{const a={day:"2-digit",month:"long",year:"numeric"};return new Date(s).toLocaleDateString("id-ID",a)},ve=s=>{switch(s){case 1:return{text:"Sudah Kadaluarsa",color:"bg-red-100 text-red-700 border-red-200",icon:$s};case 2:return{text:"Akan Kadaluarsa",color:"bg-yellow-100 text-yellow-700 border-yellow-200",icon:rs};case 3:return{text:"Aman",color:"bg-green-100 text-green-700 border-green-200",icon:Rs};default:return{text:"Unknown",color:"bg-gray-100 text-gray-700 border-gray-200",icon:rs}}},Re=s=>{Ns(a=>({...a,[s]:!a[s]}))},se=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),ys=async()=>{try{_(!0);const r=await(await D("https://digio.pgn.co.id/lisa_backend/licenses/get?page=1&paginate=9999&name=")).json();if(r.status!==200||r.data.docs.length===0){g({title:"Info",description:"Tidak ada data yang bisa diekspor (data kosong)",variant:"warning"});return}const k=r.data.docs.map((b,ke)=>({No:ke+1,"Nama Aset":b.name,"Tanggal Mulai":w(b.start_date),"Tanggal Berakhir":w(b.end_date),Status:ve(b.status_lisensi).text,Volume:b.volume,Satuan:b.satuan,"Harga Satuan":b.harga_satuan,"Total Harga":b.jumlah,Username:b.username,Password:b.password,Lokasi:b.lokasi_lisensi,Catatan:b.description,"Tanggal dibuat":w(b.createdAt),"Tanggal update":w(b.updatedAt)})),x=K.json_to_sheet(k),he=K.book_new();K.book_append_sheet(he,x,"Data Lisensi");const He=[{wch:60},{wch:15},{wch:15},{wch:15},{wch:10},{wch:10},{wch:15},{wch:15},{wch:20},{wch:20},{wch:30},{wch:40},{wch:15},{wch:15}];x["!cols"]=He;const Me=K.decode_range(x["!ref"]||"A1");for(let b=Me.s.c;b<=Me.e.c;++b){const ke=K.encode_col(b)+"1";x[ke]&&(x[ke].s={font:{bold:!0},fill:{fgColor:{rgb:"EFEFEF"}},alignment:{horizontal:"center"}})}const Hs=new Date().toISOString().split("T")[0];hs(he,`Data_Lisensi_${Hs}.xlsx`),g({title:"Export berhasil",description:"Data lisensi telah diekspor ke file Excel",variant:"success"})}catch{return}finally{_(!1)}},ks=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];a&&N(a)},bs=()=>{T(!0)},Cs=()=>{window.open("/lisa/Template_Upload_Data_Lisensi.xlsx","_blank")},[Ve,pe]=i.useState(!1),[Ss,Ne]=i.useState(!1),[y,Ge]=i.useState(null),me=(s,a)=>{s==="Delete"?(Ge(a),Ne(!0)):s==="Edit"?u(`/edit/${a.uuid}`):s==="History"&&(Ge(a),pe(!0))},Ts=async()=>{if(y)try{if((await D("https://digio.pgn.co.id/lisa_backend/licenses/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:y.uuid})})).ok)u("/"),g({title:"Berhasil",description:"Data lisensi berhasil dihapus",variant:"success"}),Ne(!1),fe(p),v==null||v();else throw new Error("Gagal menghapus data")}catch{g({title:"Error",description:"Terjadi kesalahan saat menghapus data lisensi",variant:"destructive"})}},_s=async()=>{if(!C){g({title:"Error",description:"Pilih file terlebih dahulu",variant:"destructive"});return}try{c(!0);const s=new FormData;s.append("file",C);const a=Bs("auth_name")||"";if(s.append("last_user_input",a),(await D("https://digio.pgn.co.id/lisa_backend/licenses/upload",{method:"POST",body:s})).ok)u("/"),g({title:"Import berhasil",description:"Data lisensi telah berhasil diimport",variant:"success"}),T(!1),N(null),fe(p),v==null||v();else throw new Error("Import gagal")}catch{g({title:"Import gagal",description:"Terjadi kesalahan saat mengimport data",variant:"destructive"})}finally{c(!1)}},J=i.useCallback(s=>{o(1),t===s?h(a=>a==="asc"?"desc":"asc"):(j(s),h("asc"))},[t]),q=i.useMemo(()=>s=>t!==s?e.jsx(cs,{className:"w-4 h-4 ml-1 opacity-50"}):l==="asc"?e.jsx(ds,{className:"w-4 h-4 ml-1"}):e.jsx(os,{className:"w-4 h-4 ml-1"}),[t,l]),[ye,Es]=i.useState({}),Je=s=>{Es(a=>({...a,[s]:!a[s]}))},qe=(s,a)=>{const r=[];r.push(1),s-2>2&&r.push("...");for(let k=Math.max(2,s-2);k<=Math.min(a-1,s+2);k++)r.push(k);return s+2<a-1&&r.push("..."),a>1&&r.push(a),r},Pe=s=>{I===s?ue(ee==="asc"?"desc":"asc"):(de(s),ue("asc")),G(1)},Ae=s=>I!==s?e.jsx(cs,{className:"w-4 h-4 ml-1 opacity-50"}):ee==="asc"?e.jsx(ds,{className:"w-4 h-4 ml-1"}):e.jsx(os,{className:"w-4 h-4 ml-1"}),Ds=s=>{let a=s;return V&&(a=s.filter(r=>r.description.toLowerCase().includes(V.toLowerCase())||r.last_user_input.toLowerCase().includes(V.toLowerCase())||se(r.harga_satuan).toLowerCase().includes(V.toLowerCase()))),I&&(a=[...a].sort((r,L)=>{let k=r[I],x=L[I];return I==="harga_satuan"&&(k=Number(k),x=Number(x)),(I==="tanggal"||I==="createdAt")&&(k=new Date(k).getTime(),x=new Date(x).getTime()),ee==="asc"?k<x?-1:k>x?1:0:k>x?-1:k<x?1:0})),a},ae=s=>{const a=Ds(s),r=(B-1)*oe,L=r+oe;return{items:a.slice(r,L),totalItems:a.length,totalPages:Math.ceil(a.length/oe)}},Ps=s=>{try{const a=s.history_licenses.map((x,he)=>({No:he+1,"Nama Lisensi":s.name,"Harga Satuan":x.harga_satuan,"Berlaku Sejak":w(x.tanggal),Deskripsi:x.description,"Tanggal Dibuat":w(x.createdAt),"Tanggal Update":w(x.updatedAt)})),r=K.book_new(),L=K.json_to_sheet(a);K.book_append_sheet(r,L,"Riwayat Harga");const k=new Date().toISOString().split("T")[0];hs(r,`Riwayat Harga Lisensi_${s.name}_${k}.xlsx`),g({title:"Berhasil",description:"History berhasil diekspor ke Excel",variant:"success"})}catch{g({title:"Error",description:"Gagal mengekspor history ke Excel",variant:"destructive"})}},As=()=>{$(""),de(""),ue("asc"),G(1),Ue(5)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-foreground",children:"Daftar Lisensi Aset"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsxs(n,{onClick:()=>u("/add"),className:"flex items-center justify-center gap-2 w-full sm:w-auto",variant:"success",children:[e.jsx(Be,{className:"w-4 h-4"}),"Tambah Lisensi"]}),e.jsxs(n,{onClick:()=>u("/prices"),variant:"warning",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(Gs,{className:"w-4 h-4"}),"Harga Lisensi"]}),e.jsxs(is,{children:[e.jsx(ns,{asChild:!0,children:e.jsxs(n,{variant:"default",className:"flex items-center justify-center gap-2 w-full sm:w-auto",children:[e.jsx(js,{className:"w-4 h-4"}),"Excel",e.jsx(Ie,{className:"w-4 h-4"})]})}),e.jsxs(ls,{children:[e.jsxs(je,{onClick:bs,children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),"Import Data"]}),e.jsxs(je,{onClick:ys,children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Z,{placeholder:"Cari lisensi...",value:p,onChange:s=>P(s.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:["Total Data: ",re," - Tampilkan:"]}),e.jsxs(Ce,{value:M,onValueChange:R,children:[e.jsx(Se,{className:"w-full sm:w-24",children:e.jsx(Te,{})}),e.jsxs(_e,{children:[e.jsx(O,{value:"10",children:"10"}),e.jsx(O,{value:"25",children:"25"}),e.jsx(O,{value:"50",children:"50"}),e.jsx(O,{value:"100",children:"100"})]})]})]})]}),e.jsx(W,{open:H,onOpenChange:T,children:e.jsxs(X,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Import Data Lisensi"}),e.jsx(ne,{children:"Upload file Excel untuk mengimport data lisensi baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Template Excel"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Gunakan template yang telah disediakan untuk mengimport data"}),e.jsxs(n,{variant:"secondary",size:"sm",onClick:Cs,className:"w-full",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Download Template"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Upload File"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Pilih file Excel yang akan diimport"}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(Z,{type:"file",accept:".xlsx",onChange:ks,disabled:E}),e.jsx(n,{onClick:_s,disabled:!C||E,className:"w-full",children:E?e.jsxs(e.Fragment,{children:[e.jsx(Js,{className:"w-4 h-4 mr-2 animate-spin"}),"Mengupload..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"w-4 h-4 mr-2"}),"Upload"]})})]})]})]})]})}),e.jsx(W,{open:Ss,onOpenChange:Ne,children:e.jsxs(X,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:"Konfirmasi Hapus"}),e.jsx(ne,{children:"Konfirmasi penghapusan data lisensi yang dipilih"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{children:['Apakah Anda yakin ingin menghapus lisensi "',y==null?void 0:y.name,'"?']}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"default",onClick:()=>Ne(!1),children:"Batal"}),e.jsx(n,{variant:"destructive",onClick:Ts,children:"Hapus"})]})]})}),e.jsx(W,{open:Ve,onOpenChange:pe,children:e.jsxs(X,{className:"max-w-[95vw] w-full sm:max-w-4xl max-h-[90vh] flex flex-col p-4 sm:p-6",children:[e.jsx(W,{open:Ve,onOpenChange:s=>{pe(s),s||As()},children:e.jsxs(X,{className:"w-full max-w-full sm:max-w-4xl",onOpenAutoFocus:s=>s.preventDefault(),children:[e.jsxs(te,{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Riwayat Harga Lisensi"]}),e.jsxs(ne,{className:"text-left",children:["Detail riwayat harga lisensi : ",y==null?void 0:y.name]})]}),y&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 flex-wrap w-full",children:[e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Z,{placeholder:"Cari...",value:V,onChange:s=>$(s.target.value),className:"pl-10 w-full",tabIndex:-1})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:"Tampilkan:"}),e.jsxs(Ce,{value:oe.toString(),onValueChange:s=>Ue(Number(s)),children:[e.jsx(Se,{className:"w-full sm:w-24",children:e.jsx(Te,{})}),e.jsxs(_e,{children:[e.jsx(O,{value:"5",children:"5"}),e.jsx(O,{value:"10",children:"10"}),e.jsx(O,{value:"20",children:"20"})]})]})]})]}),e.jsx("div",{className:"hidden sm:block border rounded-lg overflow-x-auto",children:e.jsxs(Fe,{className:"w-full min-w-[700px] text-sm",children:[e.jsx(ze,{children:e.jsxs(z,{className:"bg-muted/50 border-b",children:[e.jsx(f,{className:"w-12 text-center",children:"No"}),e.jsx(f,{onClick:()=>Pe("harga_satuan"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",Ae("harga_satuan")]})}),e.jsx(f,{onClick:()=>Pe("tanggal"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Berlaku Sejak",Ae("tanggal")]})}),e.jsx(f,{children:"Deskripsi"}),e.jsx(f,{onClick:()=>Pe("createdAt"),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:["Dibuat Pada",Ae("createdAt")]})})]})}),e.jsxs($e,{children:[ae(y.history_licenses).items.map((s,a)=>e.jsxs(z,{children:[e.jsx(m,{className:"text-center",children:(B-1)*oe+a+1}),e.jsx(m,{children:se(s.harga_satuan)}),e.jsx(m,{children:w(s.tanggal)}),e.jsx(m,{className:"whitespace-pre-wrap break-words max-w-[200px]",children:s.description}),e.jsx(m,{children:w(s.createdAt)})]},s.id)),ae(y.history_licenses).items.length===0&&e.jsx(z,{children:e.jsx(m,{colSpan:6,className:"text-center py-6 text-muted-foreground",children:"Tidak ada data riwayat"})})]})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:ae(y.history_licenses).items.length>0?ae(y.history_licenses).items.map((s,a)=>e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mb-1",children:[e.jsxs("span",{children:["No: ",(B-1)*oe+a+1]}),e.jsxs("span",{children:["Berlaku sejak: ",w(s.tanggal)]})]}),e.jsx("div",{className:"font-medium text-sm",children:se(s.harga_satuan)}),e.jsx("div",{className:"text-xs text-slate-400 whitespace-pre-wrap break-words mb-2",children:s.description}),e.jsx("div",{className:"flex justify-between text-xs text-muted-foreground",children:e.jsxs("span",{children:["Tanggal dibuat: ",w(s.createdAt)]})})]},s.id)):e.jsx("div",{className:"text-center py-6 text-muted-foreground text-sm",children:"Tidak ada data riwayat"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 mt-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-1 flex-wrap justify-center sm:justify-start w-full sm:w-auto",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>G(s=>Math.max(1,s-1)),disabled:B===1,children:e.jsx(xs,{className:"w-4 h-4"})}),qe(B,ae(y.history_licenses).totalPages).map((s,a)=>e.jsx(n,{variant:B===s?"default":"outline",size:"sm",onClick:()=>typeof s=="number"&&G(s),disabled:s==="...",children:s},a)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>G(s=>Math.min(ae(y.history_licenses).totalPages,s+1)),disabled:B===ae(y.history_licenses).totalPages,children:e.jsx(be,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 w-full sm:w-auto",children:[e.jsxs(n,{variant:"success",onClick:()=>y&&Ps(y),className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(Le,{className:"w-4 h-4"}),"Export"]}),e.jsx(n,{variant:"destructive",onClick:()=>pe(!1),className:"w-full sm:w-auto",children:"Tutup"})]})]})]})]})}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(n,{variant:"destructive",onClick:()=>pe(!1),children:"Batal"})})]})}),e.jsx("div",{className:"hidden sm:block border rounded-lg overflow-x-auto",children:e.jsxs(Fe,{className:"[&_tr>*]:border-r [&_tr>*:last-child]:border-r-0 [&_tr]:border-b [&_tr:last-child]:border-b-0",children:[e.jsx(ze,{children:e.jsxs(z,{className:"bg-muted/50 border-b",children:[e.jsx(f,{className:"w-[120px] text-center whitespace-nowrap",children:"Aksi"}),e.jsx(f,{className:"w-[200px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("name"),children:e.jsxs("div",{className:"flex items-center",children:["Nama Aset",q("name")]})}),e.jsx(f,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("start_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Mulai",q("start_date")]})}),e.jsx(f,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal Berakhir",q("end_date")]})}),e.jsx(f,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("end_date"),children:e.jsxs("div",{className:"flex items-center",children:["Status",q("end_date")]})}),e.jsx(f,{className:"w-[80px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("volume"),children:e.jsxs("div",{className:"flex items-center",children:["Volume",q("volume")]})}),e.jsx(f,{className:"w-[100px] whitespace-nowrap",children:"Satuan"}),e.jsx(f,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("harga_satuan"),children:e.jsxs("div",{className:"flex items-center",children:["Harga Satuan",q("harga_satuan")]})}),e.jsx(f,{className:"w-[150px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("jumlah"),children:e.jsxs("div",{className:"flex items-center",children:["Total Harga",q("jumlah")]})}),e.jsx(f,{className:"w-[130px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("createdAt"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal dibuat",q("createdAt")]})}),e.jsx(f,{className:"w-[130px] whitespace-nowrap cursor-pointer hover:bg-muted/70",onClick:()=>J("updatedAt"),children:e.jsxs("div",{className:"flex items-center",children:["Tanggal update",q("updatedAt")]})})]})}),e.jsx($e,{className:"[&_tr:last-child]:border-b-0",children:A?e.jsx(z,{children:e.jsx(m,{colSpan:11,className:"text-center py-8",children:"Memuat data..."})}):S.length===0?e.jsx(z,{children:e.jsx(m,{colSpan:11,className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"})}):S.map((s,a)=>(ve(s.status_lisensi),e.jsxs(zs.Fragment,{children:[e.jsxs(z,{className:"hover:bg-muted/30",children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(n,{variant:"success",size:"sm",onClick:()=>Je(a),children:ye[a]?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})}),e.jsx(n,{variant:"default",size:"sm",onClick:()=>me("History",s),children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx(n,{variant:"warning",size:"sm",onClick:()=>me("Edit",s),children:e.jsx(Ee,{className:"w-4 h-4"})}),e.jsx(n,{variant:"destructive",size:"sm",onClick:()=>me("Delete",s),children:e.jsx(ge,{className:"w-4 h-4"})})]})}),e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{className:"whitespace-nowrap",children:w(s.start_date)}),e.jsx(m,{className:"whitespace-nowrap",children:w(s.end_date)}),e.jsx(m,{className:"whitespace-nowrap",children:(()=>{const r=ve(s.status_lisensi),L=r.icon;return e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.color}`,children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),r.text]})})()}),e.jsx(m,{className:"text-right",children:s.volume}),e.jsx(m,{children:s.satuan}),e.jsx(m,{className:"text-right whitespace-nowrap",children:se(s.harga_satuan)}),e.jsx(m,{className:"text-right whitespace-nowrap",children:se(s.jumlah)}),e.jsx(m,{className:"whitespace-nowrap text-sm",children:w(s.createdAt)}),e.jsx(m,{className:"whitespace-nowrap text-sm",children:w(s.updatedAt)})]}),ye[a]&&e.jsx(z,{className:"bg-muted/5",children:e.jsx(m,{colSpan:11,className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Akses"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:we[a]?s.password:"•".repeat(8)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Re(a),className:"h-6 w-6 p-0",children:we[a]?e.jsx(us,{className:"h-4 w-4"}):e.jsx(ps,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",s.lokasi_lisensi]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Informasi Tambahan"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1",children:s.description})]})})]})]})})})]},s.uuid)))})]})}),e.jsx("div",{className:"block sm:hidden space-y-3",children:A?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Memuat data..."}):S.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Tidak ada data lisensi yang ditemukan"}):S.map((s,a)=>{const r=ve(s.status_lisensi),L=r.icon;return e.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.color}`,children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),r.text]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"success",size:"sm",onClick:()=>Je(a),children:ye[a]?e.jsx(Ie,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})}),e.jsxs(is,{children:[e.jsx(ns,{asChild:!0,children:e.jsx(n,{variant:"default",size:"sm",children:e.jsx(js,{className:"w-4 h-4"})})}),e.jsxs(ls,{children:[e.jsxs(je,{onClick:()=>me("History",s),children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Riwayat"]}),e.jsxs(je,{onClick:()=>me("Edit",s),children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(je,{onClick:()=>me("Delete",s),children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Hapus"]})]})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Nama Lisensi:"}),e.jsx("span",{children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Mulai:"}),e.jsx("span",{children:w(s.start_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Tanggal Berakhir:"}),e.jsx("span",{children:w(s.end_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Volume x Harga Satuan:"}),e.jsxs("span",{children:[s.volume," ",s.satuan," x ",se(s.harga_satuan)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Harga:"}),e.jsx("span",{children:se(s.jumlah)})]})]}),ye[a]&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Username:"})," ",s.username]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Password:"}),e.jsx("span",{className:"font-mono",children:we[a]?s.password:"•".repeat(8)}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>Re(a),className:"sm:inline-flex",children:we[a]?e.jsx(us,{className:"h-4 w-4"}):e.jsx(ps,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Lokasi:"})," ",s.lokasi_lisensi]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Catatan:"}),e.jsx("p",{className:"mt-1 text-muted-foreground",children:s.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tanggal dibuat"})," ",w(s.createdAt)]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Tanggal update:"})," ",w(s.updatedAt)]})]})})]},s.uuid)})}),!A&&S.length>0&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.max(1,s-1)),disabled:d===1,children:e.jsx(xs,{className:"w-4 h-4"})}),qe(d,Q).map((s,a)=>e.jsx(n,{variant:d===s?"default":"outline",size:"sm",onClick:()=>typeof s=="number"&&o(s),disabled:s==="...",children:s},a)),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>o(s=>Math.min(Q,s+1)),disabled:d===Q,children:e.jsx(be,{className:"w-4 h-4"})})]})]})},ra=({onLogout:v})=>{const u=i.useRef(null),p=()=>{var P;(P=u.current)==null||P.refreshData()};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(ea,{onLogout:v}),e.jsx("main",{className:"mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-foreground mb-2",children:"Dashboard Monitoring Lisensi"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Pantau status dan kelola lisensi aset"})]}),e.jsx(Us,{ref:u}),e.jsx(sa,{onDataChange:p})]})})]})};export{ra as default};
