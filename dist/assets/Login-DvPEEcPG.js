import{r as o,u as y,j,a,C as f,b as _,c as w,d as N,L as p,I as g,B as k,s as r,A as D,e as L,f as A,g as S}from"./index-ibwE6wfK.js";const C=({onLogin:l})=>{const[d,h]=o.useState(""),[c,b]=o.useState(""),[m,u]=o.useState(!1),{toast:s}=y(),{theme:x}=j(),v=async t=>{t.preventDefault(),u(!0);try{const e=await fetch("https://digio.pgn.co.id/lisa_backend/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:c,directory:"pertamina"})});if(console.log(e.status),e.status===401)s({title:"Login gagal",description:"Kredensial tidak valid, cek kembali username dan password anda!",variant:"destructive"});else if(e.status===403)s({title:"Login gagal",description:"Anda tidak berhak mengakses halaman ini.",variant:"destructive"});else if(e.status===500)s({title:"Login gagal",description:"Terjadi kesalahan pada server, silakan coba lagi nanti.",variant:"destructive"});else{const i=await e.json(),n=Date.now()+i.expires*1e3;r(D,i.token,{expires:new Date(n),path:"/"}),r(L,i.name,{expires:new Date(n),path:"/"}),r(A,i.group,{expires:new Date(n),path:"/"}),r(S,String(n),{expires:new Date(n),path:"/"}),s({title:"Login berhasil",description:`Selamat datang, ${i.name}`,variant:"success"})}l()}catch(e){s({title:"Login gagal",description:(e==null?void 0:e.message)||"Silakan periksa kredensial Anda",variant:"destructive"})}finally{u(!1)}};return a.jsxs("div",{className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-secondary/10",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_50%,hsl(var(--primary)_/_20%),transparent_50%)] animate-pulse"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_20%,hsl(var(--secondary)_/_20%),transparent_50%)] animate-pulse",style:{animationDelay:"1s"}}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_40%_80%,hsl(var(--accent)_/_10%),transparent_50%)] animate-pulse",style:{animationDelay:"2s"}})]}),a.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-primary/5 rounded-full blur-xl animate-bounce",style:{animationDuration:"3s"}}),a.jsx("div",{className:"absolute top-40 right-32 w-24 h-24 bg-secondary/5 rounded-full blur-xl animate-bounce",style:{animationDuration:"4s",animationDelay:"1s"}}),a.jsx("div",{className:"absolute bottom-32 left-32 w-20 h-20 bg-accent/5 rounded-full blur-xl animate-bounce",style:{animationDuration:"5s",animationDelay:"2s"}}),a.jsx("div",{className:"relative z-10 w-full max-w-md p-4",children:a.jsxs(f,{className:"backdrop-blur-sm bg-card/95 border border-border/50 shadow-2xl",children:[a.jsxs(_,{className:"space-y-2 text-center",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:x==="dark"?"/lisa/logo-dark.png":"/lisa/logo-white.png",alt:"Lisensi Aset Logo",className:"h-14 w-auto object-contain"})}),a.jsx("div",{children:a.jsx(w,{className:"text-muted-foreground",children:"Masuk ke sistem monitoring lisensi aset"})})]}),a.jsx(N,{children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"username",children:"Username"}),a.jsx(g,{id:"username",type:"text",placeholder:"username",value:d,onChange:t=>h(t.target.value),required:!0,className:"bg-background/50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(p,{htmlFor:"password",children:"Password"}),a.jsx(g,{id:"password",type:"password",placeholder:"••••••••",value:c,onChange:t=>b(t.target.value),required:!0,className:"bg-background/50"})]}),a.jsx(k,{type:"submit",className:"w-full mt-6 bg-primary hover:bg-primary/90 text-primary-foreground",disabled:m,children:m?"Memproses...":"Login"})]})})]})})]})},T=({onLogin:l})=>a.jsx(C,{onLogin:l});export{T as default};
